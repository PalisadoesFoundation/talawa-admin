id: assertions-after-async-must-use-waitfor
language: typescript
rule:
  follows:
    stopBy: end
    pattern: await userEvent.$METHOD($$$)
  regex: "expect\\("
  not:
    inside:
      pattern: waitFor(() => { $$$ })
message: 'Assertion after async operation must be inside waitFor'
severity: error
