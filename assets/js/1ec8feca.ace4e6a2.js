"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[42331],{5225:(e,n,s)=>{s.d(n,{A:()=>t});const t=s.p+"assets/files/pull-request-3da693418fd62e6bf6d99ca6a24c26b5.yml"},28453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>l});var t=s(96540);const i={},r=t.createContext(i);function o(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:o(e.components),t.createElement(r.Provider,{value:n},e.children)}},35634:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"docs/developer-resources/testing","title":"Testing","description":"Introduction","source":"@site/docs/docs/developer-resources/testing.md","sourceDirName":"docs/developer-resources","slug":"/developer-resources/testing","permalink":"/docs/developer-resources/testing","draft":false,"unlisted":false,"editUrl":"https://github.com/PalisadoesFoundation/talawa-admin/edit/develop/docs/docs/docs/developer-resources/testing.md","tags":[],"version":"current","sidebarPosition":60,"frontMatter":{"id":"testing","title":"Testing","slug":"/developer-resources/testing","sidebar_position":60},"sidebar":"tutorialSidebar","previous":{"title":"Plugin GraphQL Integration","permalink":"/docs/developer-resources/plugin-graphql-integration"},"next":{"title":"End to End Testing","permalink":"/docs/developer-resources/e2e-testing"}}');var i=s(74848),r=s(28453);const o={id:"testing",title:"Testing",slug:"/developer-resources/testing",sidebar_position:60},l=void 0,a={},c=[{value:"Introduction",id:"introduction",level:2},{value:"Developers using Microsoft Windows",id:"developers-using-microsoft-windows",level:3},{value:"UI/UX Testing",id:"uiux-testing",level:3},{value:"Linting and Formatting",id:"linting-and-formatting",level:2},{value:"Vitest Testing",id:"vitest-testing",level:2},{value:"Running Tests",id:"running-tests",level:3},{value:"Test Coverage",id:"test-coverage",level:3},{value:"Test Sharding",id:"test-sharding",level:3},{value:"Code Coverage Standards",id:"code-coverage-standards",level:3},{value:"Cypress End-to-End Testing",id:"cypress-end-to-end-testing",level:2},{value:"Debugging Tests",id:"debugging-tests",level:2},{value:"Husky for Git Hooks",id:"husky-for-git-hooks",level:2},{value:"pre-commit hook",id:"pre-commit-hook",level:3},{value:"post-merge hook",id:"post-merge-hook",level:3}];function d(e){const n={a:"a",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,i.jsx)(n.p,{children:"It is important to test our code. If you are a contributor, please follow the guidance on this page."}),"\n",(0,i.jsx)(n.h3,{id:"developers-using-microsoft-windows",children:"Developers using Microsoft Windows"}),"\n",(0,i.jsx)(n.p,{children:"All our workflows use Linux based commands, therefore if you are a developer who codes in Microsoft Windows then we strongly suggest that you use the Windows Subsystem for Linux (WSL) as your command line interface (CLI)."}),"\n",(0,i.jsx)(n.h3,{id:"uiux-testing",children:"UI/UX Testing"}),"\n",(0,i.jsxs)(n.p,{children:["If you have loaded the API sample database, then you can login using the credentials found on the ",(0,i.jsx)(n.a,{href:"https://docs-api.talawa.io/docs/developer-resources/testing/",children:"testing page of the API documentation website"})]}),"\n",(0,i.jsx)(n.h2,{id:"linting-and-formatting",children:"Linting and Formatting"}),"\n",(0,i.jsx)(n.p,{children:"All pull requests must have code that is properly linted and formatted to ensure uniformity across the repository."}),"\n",(0,i.jsx)(n.p,{children:"Before opening a PR, run the following scripts to automatically lint and format the code:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm run lint:fix\nnpm run format:fix\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Both scripts also have a ",(0,i.jsx)(n.code,{children:"check"})," counterpart, which is used by GitHub CI to ensure that the code is properly formatted.\nYou can run these scripts yourself to ensure that your pull request doesn't fail due to linting and formatting errors:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm run lint:check\nnpm run format:check\n"})}),"\n",(0,i.jsx)(n.h2,{id:"vitest-testing",children:"Vitest Testing"}),"\n",(0,i.jsxs)(n.p,{children:["This project uses ",(0,i.jsx)(n.a,{href:"https://vitest.dev/",children:"Vitest"})," as the testing framework."]}),"\n",(0,i.jsx)(n.h3,{id:"running-tests",children:"Running Tests"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Run all tests:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm run test\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Run a single test file:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm run test /path/to/test/file\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Watch tests for changes:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm run test:watch\n"})}),"\n",(0,i.jsx)(n.p,{children:"This opens the Vitest UI for interactive testing."}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"test-coverage",children:"Test Coverage"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"View coverage for all test files:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm run test:coverage\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"View coverage for a single test file:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm run test:coverage /path/to/test/file\n"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Generate HTML coverage report:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm run test:coverage\ngenhtml coverage/lcov.info -o coverage\n"})}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"genhtml"})," command is part of the Linux ",(0,i.jsx)(n.code,{children:"lcov"})," package. Similar packages are available for Windows and MacOS."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"test-sharding",children:"Test Sharding"}),"\n",(0,i.jsx)(n.p,{children:"For improved performance, especially in CI/CD environments, you can run tests in parallel using sharding:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm run test:shard\n"})}),"\n",(0,i.jsx)(n.p,{children:"To run a specific shard, use environment variables:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"SHARD_INDEX=1 SHARD_COUNT=4 npm run test:shard\n"})}),"\n",(0,i.jsx)(n.p,{children:"This divides the test suite into 4 parts and runs the 1st part. This is particularly useful for:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Running tests in parallel across multiple CI jobs"}),"\n",(0,i.jsx)(n.li,{children:"Faster test execution on multi-core systems"}),"\n",(0,i.jsx)(n.li,{children:"Reducing overall test suite runtime"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"You can also run sharded tests with coverage:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm run test:shard:coverage\n"})}),"\n",(0,i.jsx)(n.h3,{id:"code-coverage-standards",children:"Code Coverage Standards"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["The current code coverage of the repository: ",(0,i.jsx)(n.a,{href:"https://codecov.io/gh/PalisadoesFoundation/talawa-admin",children:(0,i.jsx)(n.img,{src:"https://codecov.io/gh/PalisadoesFoundation/talawa-admin/branch/develop/graph/badge.svg?token=II0R0RREES",alt:"codecov"})})]}),"\n",(0,i.jsxs)(n.li,{children:["The currently acceptable coverage rate can be found in the ",(0,i.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:s(5225).A+"",children:"GitHub Pull Request workflow file"}),". Search for the value below the line containing ",(0,i.jsx)(n.code,{children:"min_coverage"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"cypress-end-to-end-testing",children:"Cypress End-to-End Testing"}),"\n",(0,i.jsxs)(n.p,{children:["Cypress is used for end-to-end testing to ensure the application works correctly from a user's perspective.\nTo read more about Cypress testing, please refer to the ",(0,i.jsx)(n.a,{href:"/docs/developer-resources/e2e-testing",children:"Our end to end testing with Cypress guide"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"debugging-tests",children:"Debugging Tests"}),"\n",(0,i.jsxs)(n.p,{children:["You can see the output of failing tests in your browser using the ",(0,i.jsx)(n.code,{children:"vitest"})," UI:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"npm run test:watch\n"})}),"\n",(0,i.jsx)(n.p,{children:"This opens an interactive UI where you can:\\n- View test results in real-time"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Debug failing tests"}),"\n",(0,i.jsx)(n.li,{children:"Re-run specific tests"}),"\n",(0,i.jsx)(n.li,{children:"View detailed error messages and stack traces"}),"\n"]}),"\n",(0,i.jsx)(n.h2,{id:"husky-for-git-hooks",children:"Husky for Git Hooks"}),"\n",(0,i.jsxs)(n.p,{children:["We are using the package ",(0,i.jsx)(n.code,{children:"Husky"})," to run git hooks that run according to different git workflows."]}),"\n",(0,i.jsx)(n.h3,{id:"pre-commit-hook",children:"pre-commit hook"}),"\n",(0,i.jsx)(n.p,{children:"We run a pre-commit hook which automatically runs code quality checks each time you make a commit and also fixes some of the issues. This way you don't have to run them manually each time."}),"\n",(0,i.jsxs)(n.p,{children:["If you don't want these pre-commit checks running on each commit, you can manually opt out of it using the ",(0,i.jsx)(n.code,{children:"--no-verify"})," flag with your commit message as shown:-"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'git commit -m "commit message" --no-verify\n'})}),"\n",(0,i.jsx)(n.h3,{id:"post-merge-hook",children:"post-merge hook"}),"\n",(0,i.jsx)(n.p,{children:'We are also running a post-merge(post-pull) hook which will automatically run "npm install" only if there is any change made to package.json file so that the developer has all the required dependencies when pulling files from remote.'}),"\n",(0,i.jsxs)(n.p,{children:["If you don't want this hook to run, you can manually opt out of this using the ",(0,i.jsx)(n.code,{children:"--no-verify"})," flag while using the merge command ",(0,i.jsx)(n.code,{children:"git pull"}),":"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"git pull --no-verify\n"})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}}}]);