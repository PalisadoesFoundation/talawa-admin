"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[72304],{29438:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>d});var i=s(30758);const t={},r=i.createContext(t);function l(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),i.createElement(r.Provider,{value:n},e.children)}},73007:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"docs/developer-resources/installation","title":"Installation","description":"OS Detection Library for Install Scripts","source":"@site/docs/docs/developer-resources/installation.md","sourceDirName":"docs/developer-resources","slug":"/developer-resources/installation","permalink":"/docs/developer-resources/installation","draft":false,"unlisted":false,"editUrl":"https://github.com/PalisadoesFoundation/talawa-admin/edit/develop/docs/docs/docs/developer-resources/installation.md","tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"id":"installation","title":"Installation","slug":"/developer-resources/installation","sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"Registration & Login","permalink":"/docs/login"},"next":{"title":"Introduction","permalink":"/docs/developer-resources/introduction"}}');var t=s(86070),r=s(29438);const l={id:"installation",title:"Installation",slug:"/developer-resources/installation",sidebar_position:5},d=void 0,c={},o=[{value:"OS Detection Library for Install Scripts",id:"os-detection-library-for-install-scripts",level:2},{value:"Overview",id:"overview",level:3},{value:"Usage",id:"usage",level:3},{value:"Exported Variables",id:"exported-variables",level:3},{value:"Exported Functions",id:"exported-functions",level:3},{value:"Supported Operating Systems",id:"supported-operating-systems",level:3},{value:"Example Script",id:"example-script",level:3},{value:"Important Notes",id:"important-notes",level:3},{value:"Testing",id:"testing",level:3}];function a(e){const n={code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"os-detection-library-for-install-scripts",children:"OS Detection Library for Install Scripts"}),"\n",(0,t.jsxs)(n.p,{children:["The Talawa Admin repository includes a robust OS detection library (",(0,t.jsx)(n.code,{children:"scripts/install/lib/os-detect.sh"}),") that provides reliable cross-platform OS identification for bash installation scripts. This library is used internally by the automated installer and can be leveraged by developers creating custom installation or setup scripts."]}),"\n",(0,t.jsx)(n.h3,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(n.p,{children:"The OS detection library provides:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Cross-platform OS detection for macOS, Debian/Ubuntu, RHEL/Fedora, and WSL variants"}),"\n",(0,t.jsx)(n.li,{children:"Cached results for performance (subsequent calls are instant)"}),"\n",(0,t.jsx)(n.li,{children:"Safe handling of missing system files"}),"\n",(0,t.jsxs)(n.li,{children:["Alignment with the TypeScript OS detector (",(0,t.jsx)(n.code,{children:"src/install/os/detector.ts"}),")"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"usage",children:"Usage"}),"\n",(0,t.jsx)(n.p,{children:"To use the OS detection library in your bash scripts:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'# Source the library\nsource ./scripts/install/lib/os-detect.sh\n\n# Detect the operating system\ndetect_os\n\n# Access the results\necho "$OS_TYPE"           # e.g., "macos", "debian", "wsl-debian"\necho "$OS_DISPLAY_NAME"   # e.g., "macOS", "WSL (Debian/Ubuntu)"\necho "$IS_WSL"            # "true" or "false"\n'})}),"\n",(0,t.jsx)(n.h3,{id:"exported-variables",children:"Exported Variables"}),"\n",(0,t.jsxs)(n.p,{children:["After calling ",(0,t.jsx)(n.code,{children:"detect_os"}),", the following variables are available:"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Variable"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"}),(0,t.jsx)(n.th,{children:"Example Values"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"OS_TYPE"})}),(0,t.jsx)(n.td,{children:"String"}),(0,t.jsx)(n.td,{children:"OS type identifier"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"macos"}),", ",(0,t.jsx)(n.code,{children:"debian"}),", ",(0,t.jsx)(n.code,{children:"redhat"}),", ",(0,t.jsx)(n.code,{children:"wsl-debian"}),", ",(0,t.jsx)(n.code,{children:"wsl-redhat"}),", ",(0,t.jsx)(n.code,{children:"wsl-unknown"}),", ",(0,t.jsx)(n.code,{children:"unknown"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"OS_DISPLAY_NAME"})}),(0,t.jsx)(n.td,{children:"String"}),(0,t.jsx)(n.td,{children:"Human-readable OS name"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"macOS"}),", ",(0,t.jsx)(n.code,{children:"Debian/Ubuntu"}),", ",(0,t.jsx)(n.code,{children:"WSL (Debian/Ubuntu)"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"IS_WSL"})}),(0,t.jsx)(n.td,{children:"Boolean"}),(0,t.jsx)(n.td,{children:"Whether running in WSL"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"true"}),", ",(0,t.jsx)(n.code,{children:"false"})]})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"exported-functions",children:"Exported Functions"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Function"}),(0,t.jsx)(n.th,{children:"Description"}),(0,t.jsx)(n.th,{children:"Returns"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"detect_os"})}),(0,t.jsx)(n.td,{children:"Detects OS and sets exported variables. Idempotent (cached after first call)."}),(0,t.jsxs)(n.td,{children:["Always returns ",(0,t.jsx)(n.code,{children:"0"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"get_os_display_name"})}),(0,t.jsxs)(n.td,{children:["Calls ",(0,t.jsx)(n.code,{children:"detect_os"})," and returns the human-readable OS name"]}),(0,t.jsx)(n.td,{children:"OS display name via stdout"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"supported-operating-systems",children:"Supported Operating Systems"}),"\n",(0,t.jsx)(n.p,{children:"The library detects the following operating system types:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"macOS"})," (",(0,t.jsx)(n.code,{children:'OS_TYPE="macos"'}),") - Native macOS systems"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Debian/Ubuntu"})," (",(0,t.jsx)(n.code,{children:'OS_TYPE="debian"'}),") - Native Debian-based Linux systems"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"RHEL/Fedora"})," (",(0,t.jsx)(n.code,{children:'OS_TYPE="redhat"'}),") - Native RHEL-based Linux systems"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"WSL Debian"})," (",(0,t.jsx)(n.code,{children:'OS_TYPE="wsl-debian"'}),") - Windows Subsystem for Linux running Debian/Ubuntu"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"WSL RHEL"})," (",(0,t.jsx)(n.code,{children:'OS_TYPE="wsl-redhat"'}),") - Windows Subsystem for Linux running RHEL/Fedora"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"WSL Unknown"})," (",(0,t.jsx)(n.code,{children:'OS_TYPE="wsl-unknown"'}),") - Windows Subsystem for Linux with unrecognized distro"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Unknown"})," (",(0,t.jsx)(n.code,{children:'OS_TYPE="unknown"'}),") - Fallback for unsupported systems"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"example-script",children:"Example Script"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'#!/bin/bash\nset -euo pipefail\n\n# Source the OS detection library\nsource "$(dirname "$0")/scripts/install/lib/os-detect.sh"\n\n# Detect the operating system\ndetect_os\n\n# Use OS information to customize installation\ncase "$OS_TYPE" in\n    macos)\n        echo "Installing for macOS..."\n        brew install package-name\n        ;;\n    debian)\n        echo "Installing for Debian/Ubuntu..."\n        sudo apt-get install -y package-name\n        ;;\n    redhat)\n        echo "Installing for RHEL/Fedora..."\n        sudo dnf install -y package-name\n        ;;\n    wsl-*)\n        echo "Detected WSL environment: $OS_DISPLAY_NAME"\n        # Special handling for WSL\n        ;;\n    *)\n        echo "Unsupported OS: $OS_DISPLAY_NAME"\n        exit 1\n        ;;\nesac\n'})}),"\n",(0,t.jsx)(n.h3,{id:"important-notes",children:"Important Notes"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Multiple Sourcing"}),": The library is safe to source multiple times - it will only execute once per shell session"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Caching"}),": The ",(0,t.jsx)(n.code,{children:"detect_os"})," function caches results after the first call for performance"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Bash Compatibility"}),": Compatible with Bash 3.2+ (macOS default) and later versions"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"No System Modifications"}),": The library only reads system files and never modifies them"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"testing",children:"Testing"}),"\n",(0,t.jsxs)(n.p,{children:["The library includes a comprehensive test suite at ",(0,t.jsx)(n.code,{children:"scripts/install/lib/os-detect.spec.sh"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"# Run all tests\nbash scripts/install/lib/os-detect.spec.sh\n\n# Or make it executable and run\nchmod +x scripts/install/lib/os-detect.spec.sh\n./scripts/install/lib/os-detect.spec.sh\n"})}),"\n",(0,t.jsx)(n.p,{children:"The test suite covers:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Detection for all supported OS types"}),"\n",(0,t.jsxs)(n.li,{children:["WSL detection (via environment variable and ",(0,t.jsx)(n.code,{children:"/proc/version"}),")"]}),"\n",(0,t.jsx)(n.li,{children:"Caching and idempotency behavior"}),"\n",(0,t.jsx)(n.li,{children:"Variable exports and function behavior"}),"\n",(0,t.jsx)(n.li,{children:"Edge cases and unknown OS handling"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}}}]);