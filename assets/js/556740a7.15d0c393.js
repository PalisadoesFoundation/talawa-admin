"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[8964],{14958:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>t,contentTitle:()=>o,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"docs/developer-resources/tablefix-tables","title":"Data Tables","description":"End\u2011to\u2011end guide to Talawa Admin\u2019s generic DataTable, including types, structure, empty/error states, pagination, loading, sorting, filtering/search, selection/actions, accessibility, testing, and migration patterns.","source":"@site/docs/docs/developer-resources/tables.md","sourceDirName":"docs/developer-resources","slug":"/developer-resources/tables","permalink":"/docs/developer-resources/tables","draft":false,"unlisted":false,"editUrl":"https://github.com/PalisadoesFoundation/talawa-admin/edit/develop/docs/docs/docs/developer-resources/tables.md","tags":[{"inline":true,"label":"react","permalink":"/docs/tags/react"},{"inline":true,"label":"typescript","permalink":"/docs/tags/typescript"},{"inline":true,"label":"talawa-admin","permalink":"/docs/tags/talawa-admin"},{"inline":true,"label":"table","permalink":"/docs/tags/table"},{"inline":true,"label":"data","permalink":"/docs/tags/data"},{"inline":true,"label":"pagination","permalink":"/docs/tags/pagination"},{"inline":true,"label":"sorting","permalink":"/docs/tags/sorting"},{"inline":true,"label":"filtering","permalink":"/docs/tags/filtering"},{"inline":true,"label":"accessibility","permalink":"/docs/tags/accessibility"}],"version":"current","sidebarPosition":36,"frontMatter":{"id":"tablefix-tables","title":"Data Tables","description":"End\u2011to\u2011end guide to Talawa Admin\u2019s generic DataTable, including types, structure, empty/error states, pagination, loading, sorting, filtering/search, selection/actions, accessibility, testing, and migration patterns.","slug":"/developer-resources/tables","sidebar_position":36,"tags":["react","typescript","talawa-admin","table","data","pagination","sorting","filtering","accessibility"]},"sidebar":"tutorialSidebar","previous":{"title":"Reusable Components","permalink":"/docs/developer-resources/reusable-components"},"next":{"title":"DataGridWrapper Component","permalink":"/docs/developer-resources/data-grid-wrapper"}}');var s=a(86070),i=a(29438);const l={id:"tablefix-tables",title:"Data Tables",description:"End\u2011to\u2011end guide to Talawa Admin\u2019s generic DataTable, including types, structure, empty/error states, pagination, loading, sorting, filtering/search, selection/actions, accessibility, testing, and migration patterns.",slug:"/developer-resources/tables",sidebar_position:36,tags:["react","typescript","talawa-admin","table","data","pagination","sorting","filtering","accessibility"]},o=void 0,t={},d=[{value:"Introduction",id:"introduction",level:2},{value:"Overview",id:"overview",level:2},{value:"Quick Start (Minimal)",id:"quick-start-minimal",level:2},{value:"Types reference (authoritative)",id:"types-reference-authoritative",level:2},{value:"Short examples",id:"short-examples",level:3},{value:"Component: DataTable",id:"component-datatable",level:2},{value:"Hooks",id:"hooks",level:2},{value:"Hook: useTableData",id:"hook-usetabledata",level:3},{value:"Pagination",id:"pagination",level:2},{value:"Client-side Pagination",id:"client-side-pagination",level:3},{value:"Server-side Pagination (GraphQL cursor)",id:"server-side-pagination-graphql-cursor",level:3},{value:"Accessibility notes",id:"accessibility-notes",level:3},{value:"Loading state optimizations",id:"loading-state-optimizations",level:2},{value:"Initial load skeleton",id:"initial-load-skeleton",level:3},{value:"Refetch overlay",id:"refetch-overlay",level:3},{value:"Partial loading (fetchMore)",id:"partial-loading-fetchmore",level:3},{value:"Accessibility &amp; styling",id:"accessibility--styling",level:3},{value:"TableLoader component",id:"tableloader-component",level:3},{value:"Sorting",id:"sorting",level:2},{value:"Filtering and Global Search",id:"filtering-and-global-search",level:2},{value:"Selection, Row Actions, and Bulk Actions",id:"selection-row-actions-and-bulk-actions",level:2},{value:"Accessibility",id:"accessibility",level:2},{value:"Testing and Coverage",id:"testing-and-coverage",level:2},{value:"Performance &amp; Gotchas",id:"performance--gotchas",level:2},{value:"Migration Guide (Playbook)",id:"migration-guide-playbook",level:2},{value:"FAQ",id:"faq",level:2},{value:"Changelog by Phase (TableFix)",id:"changelog-by-phase-tablefix",level:2}];function c(e){const n={admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,s.jsx)(n.p,{children:"What you\u2019ll learn"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"How to define strongly\u2011typed table columns with string and function accessors"}),"\n",(0,s.jsx)(n.li,{children:"How to render the generic DataTable with empty/error handling"}),"\n",(0,s.jsx)(n.li,{children:"How to use client/server pagination and the useTableData hook"}),"\n",(0,s.jsx)(n.li,{children:"How to add loading skeletons and refetch overlays"}),"\n",(0,s.jsx)(n.li,{children:"How to enable sorting, filtering, global search, selection, and actions"}),"\n",(0,s.jsx)(n.li,{children:"How to test reliably with \u2265 95% coverage and migrate existing screens"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"The generic DataTable provides a single, shared, strongly typed table foundation for\nTalawa Admin. It replaces bespoke per\u2011screen tables with a consistent API for:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Type\u2011safe column definitions"}),"\n",(0,s.jsx)(n.li,{children:"Empty and error states"}),"\n",(0,s.jsx)(n.li,{children:"Client and server pagination"}),"\n",(0,s.jsx)(n.li,{children:"Loading skeletons/overlays"}),"\n",(0,s.jsx)(n.li,{children:"Sorting"}),"\n",(0,s.jsx)(n.li,{children:"Filtering and global search"}),"\n",(0,s.jsx)(n.li,{children:"Row selection, row actions, and bulk actions"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Architecture at a glance:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-mermaid",children:"flowchart LR\n  Q[GraphQL QueryResult] --\x3e H[useTableData]\n  H --\x3e|rows, pageInfo, loading| DT[DataTable]\n  DT --\x3e|onLoadMore/onSortChange| Q\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsx)(n.p,{children:"Base UI uses React\u2011Bootstrap\u2019s Table component to match the repo\u2019s existing styling and\nresponsiveness while keeping the API minimal and framework\u2011agnostic."})}),"\n",(0,s.jsx)(n.h2,{id:"quick-start-minimal",children:"Quick Start (Minimal)"}),"\n",(0,s.jsx)(n.p,{children:"Before \u2192 After"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"// Before (bespoke table; simplified)\n<Table>\n  <thead>\n    <tr>\n      <th>Name</th>\n      <th>Email</th>\n    </tr>\n  </thead>\n  <tbody>\n    {users.map((u) => (\n      <tr key={u.id}>\n        <td>{u.name}</td>\n        <td>{u.email}</td>\n      </tr>\n    ))}\n  </tbody>\n</Table>\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"// After (generic DataTable)\nimport { DataTable } from 'src/shared-components/DataTable/DataTable';\nimport type { ColumnDef } from 'src/shared-components/DataTable/types';\n\ntype User = { id: string; name: string; email: string };\n\nconst columns: Array<ColumnDef<User>> = [\n  { id: 'name', header: 'Name', accessor: 'name' },\n  { id: 'email', header: 'Email', accessor: (u) => u.email.toLowerCase() },\n];\n\n<DataTable<User>\n  data={[{ id: '1', name: 'Ada', email: 'Ada@Example.com' }]}\n  columns={columns}\n  rowKey=\"id\"\n/>;\n"})}),"\n",(0,s.jsx)(n.h2,{id:"types-reference-authoritative",children:"Types reference (authoritative)"}),"\n",(0,s.jsx)(n.p,{children:"Core types used throughout the generic table system."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// Accessors\nexport type Accessor<T> = keyof T | ((row: T) => unknown);\nexport type AccessorValue<T, A extends Accessor<T>> = A extends keyof T\n  ? T[A]\n  : A extends (row: T) => infer R\n    ? R\n    : unknown;\n\n// Sorting\nexport type SortDirection = 'asc' | 'desc';\n\n// Column definition\nexport interface ColumnDef<T, A extends Accessor<T> = Accessor<T>> {\n  id: string;\n  header: string | (() => React.ReactNode);\n  accessor: A;\n  render?: (value: AccessorValue<T, A>, row: T) => React.ReactNode;\n  meta?: {\n    sortable?: boolean;\n    sortFn?: (a: T, b: T) => number;\n    filterable?: boolean;\n    searchable?: boolean;\n    filterFn?: (row: T, value: unknown) => boolean;\n    getSearchValue?: (row: T) => string;\n    width?: string | number;\n    align?: 'left' | 'center' | 'right';\n    ariaLabel?: string;\n  };\n}\n\nexport interface PageInfo {\n  hasNextPage: boolean;\n  hasPreviousPage: boolean;\n  startCursor?: string;\n  endCursor?: string;\n}\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// DataTable props (key fields)\nexport interface DataTableProps<T> {\n  data: readonly T[];\n  columns: readonly ColumnDef<T>[];\n  loading?: boolean;\n  error?: Error | null;\n  renderError?: (error: Error) => React.ReactNode;\n  rowKey?: keyof T | ((row: T) => string | number);\n  emptyMessage?: string;\n\n  // Pagination\n  paginationMode?: 'client' | 'server';\n  pageSize?: number;\n  currentPage?: number;\n  onPageChange?: (page: number) => void;\n  totalItems?: number;\n  pageInfo?: PageInfo;\n  onLoadMore?: () => void;\n  loadingMore?: boolean;\n\n  // Loading optimizations\n  /**\n   * Number of skeleton rows to render during loading/overlay states.\n   * Default: 5\n   */\n  skeletonRows?: number;\n  /**\n   * When true and data is already present, show a translucent overlay on top of the table\n   * while a refetch is in flight. Overlay displays skeleton grid matching table columns.\n   */\n  loadingOverlay?: boolean;\n  /**\n   * When true, append skeleton rows at the end of the table body to indicate a partial\n   * loading state (e.g., while fetchMore is running in incremental pagination).\n   */\n  loadingMore?: boolean;\n\n  // Sorting\n  serverSort?: boolean;\n  sortBy?: string;\n  sortDirection?: SortDirection;\n  onSortChange?: (next: {\n    sortBy: string;\n    sortDirection: SortDirection;\n    column: ColumnDef<T>;\n  }) => void;\n  initialSortBy?: string;\n  initialSortDirection?: SortDirection;\n\n  // Filtering & search\n  showSearch?: boolean;\n  searchPlaceholder?: string;\n  globalSearch?: string;\n  onGlobalSearchChange?: (q: string) => void;\n  initialGlobalSearch?: string;\n  columnFilters?: Record<string, unknown>;\n  onColumnFiltersChange?: (filters: Record<string, unknown>) => void;\n  serverSearch?: boolean;\n  serverFilter?: boolean;\n\n  // Selection & actions\n  selectable?: boolean;\n  selectedKeys?: ReadonlySet<string | number>;\n  onSelectionChange?: (next: ReadonlySet<string | number>) => void;\n  initialSelectedKeys?: ReadonlySet<string | number>;\n  rowActions?: ReadonlyArray<RowAction<T>>;\n  bulkActions?: ReadonlyArray<BulkAction<T>>;\n}\n\nexport type Key = string | number;\n\nexport type RowAction<T> = {\n  id: string;\n  label: string;\n  onClick: (row: T) => void;\n  disabled?: boolean | ((row: T) => boolean);\n  ariaLabel?: string;\n};\n\nexport type BulkAction<T> = {\n  id: string;\n  label: string;\n  onClick: (rows: T[], keys: Key[]) => void | Promise<void>;\n  disabled?: boolean | ((rows: T[], keys: Key[]) => boolean);\n  confirm?: string;\n};\n\nexport interface TableState<T = unknown> {\n  sortBy?: string;\n  sortDirection?: SortDirection;\n  filters?: Partial<Record<string, unknown>>;\n  globalSearch?: string;\n  selectedKeys?: Set<Key>;\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"short-examples",children:"Short examples"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// String and function accessors\nconst nameCol = { id: 'name', header: 'Name', accessor: 'name' } as const;\nconst emailCol = {\n  id: 'email',\n  header: 'Email',\n  accessor: (u: User) => u.email.toLowerCase(),\n} as const;\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// Sort by string length via custom comparator\nconst byLen = {\n  id: 'custom',\n  header: 'Custom',\n  accessor: (u: User) => u.name,\n  meta: {\n    sortable: true,\n    sortFn: (a: User, b: User) => a.name.length - b.name.length,\n  },\n};\n"})}),"\n",(0,s.jsx)(n.h2,{id:"component-datatable",children:"Component: DataTable"}),"\n",(0,s.jsx)(n.p,{children:"The DataTable renders headers and rows from your typed column definitions. It includes built\u2011in\nempty/error precedence: error > loading > empty > table."}),"\n",(0,s.jsx)(n.p,{children:"Key props (ergonomics\u2011focused):"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Prop"}),(0,s.jsx)(n.th,{children:"Type"}),(0,s.jsx)(n.th,{children:"Default"}),(0,s.jsx)(n.th,{children:"Notes"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"data"}),(0,s.jsx)(n.td,{children:"readonly T[]"}),(0,s.jsx)(n.td,{children:"[]"}),(0,s.jsx)(n.td,{children:"Rows to display"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"columns"}),(0,s.jsx)(n.td,{children:"ColumnDef<T>[]"}),(0,s.jsx)(n.td,{children:"\u2014"}),(0,s.jsx)(n.td,{children:"Column configuration"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"rowKey"}),(0,s.jsx)(n.td,{children:"keyof T or fn"}),(0,s.jsx)(n.td,{children:"index"}),(0,s.jsx)(n.td,{children:"Stable keys recommended"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"loading"}),(0,s.jsx)(n.td,{children:"boolean"}),(0,s.jsx)(n.td,{children:"false"}),(0,s.jsx)(n.td,{children:"Shows loading state"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"error"}),(0,s.jsx)(n.td,{children:"Error or null"}),(0,s.jsx)(n.td,{children:"null"}),(0,s.jsx)(n.td,{children:"Renders error region"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"emptyMessage"}),(0,s.jsx)(n.td,{children:"string"}),(0,s.jsx)(n.td,{children:'"No data available"'}),(0,s.jsx)(n.td,{children:"Shown when no rows"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"paginationMode"}),(0,s.jsx)(n.td,{children:"'client' | 'server'"}),(0,s.jsx)(n.td,{children:"\u2014"}),(0,s.jsx)(n.td,{children:"See Pagination"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"serverSort"}),(0,s.jsx)(n.td,{children:"boolean"}),(0,s.jsx)(n.td,{children:"false"}),(0,s.jsx)(n.td,{children:"Use onSortChange for SSR"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"showSearch"}),(0,s.jsx)(n.td,{children:"boolean"}),(0,s.jsx)(n.td,{children:"false"}),(0,s.jsx)(n.td,{children:"Renders search bar"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"selectable"}),(0,s.jsx)(n.td,{children:"boolean"}),(0,s.jsx)(n.td,{children:"false"}),(0,s.jsx)(n.td,{children:"Enables selection column"})]})]})]}),"\n",(0,s.jsx)(n.p,{children:"Minimal structure example"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'import { DataTable } from \'src/shared-components/DataTable/DataTable\';\n\n<DataTable<User>\n  data={users}\n  columns={[nameCol, emailCol]}\n  loading={false}\n  emptyMessage="Nothing to show"\n  rowKey="id"\n/>;\n'})}),"\n",(0,s.jsx)(n.p,{children:"Empty and Error"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"<DataTable<User>\n  data={[]}\n  columns={[nameCol]}\n  loading={false}\n  emptyMessage=\"No users\"\n/>\n\n<DataTable<User>\n  data={[]}\n  columns={[nameCol]}\n  error={new Error('Network timeout')}\n/>\n"})}),"\n",(0,s.jsx)(n.h2,{id:"hooks",children:"Hooks"}),"\n",(0,s.jsx)(n.p,{children:"This section explains how we use hooks in the table related components."}),"\n",(0,s.jsx)(n.h3,{id:"hook-usetabledata",children:"Hook: useTableData"}),"\n",(0,s.jsx)(n.p,{children:"The useTableData hook flattens GraphQL connections (edges \u2192 rows) and exposes pagination signals."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { useMemo } from 'react';\nimport type { QueryResult, NetworkStatus } from '@apollo/client';\nimport type { PageInfo } from '../types';\n\ntype Edge<T> = { node: T | null } | null;\ntype Connection<T> =\n  | { edges?: Array<Edge<T>> | null; pageInfo?: PageInfo | null }\n  | null\n  | undefined;\n\nexport interface UseTableDataOptions<TNode, TRow, TData> {\n  path: ((data: TData) => Connection<TNode> | undefined) | (string | number)[];\n  transformNode?: (node: TNode) => TRow;\n  deps?: ReadonlyArray<unknown>;\n}\n\nexport function useTableData<TData = unknown, TRow = unknown, TNode = unknown>(\n  result: QueryResult<TData>,\n  options: UseTableDataOptions<TNode, TRow, TData>,\n) {\n  const { data, loading, error, refetch, fetchMore, networkStatus } = result;\n  const { path, transformNode, deps = [] } = options;\n\n  const getConnection = (d: TData): Connection<TNode> =>\n    typeof path === 'function'\n      ? path(d)\n      : path.reduce<unknown>(\n          (acc, k) =>\n            acc != null && typeof acc === 'object'\n              ? (acc as Record<string | number, unknown>)[k]\n              : undefined,\n          d as unknown,\n        );\n\n  const connection = useMemo(() => getConnection(data), [data, ...deps]);\n\n  const rows = useMemo<TRow[]>(() => {\n    const nodes = (connection?.edges ?? [])\n      .filter(Boolean)\n      .map((e: any) => e?.node)\n      .filter(Boolean) as TNode[];\n    const map = transformNode ?? ((n: unknown) => n as unknown as TRow);\n    return nodes.map(map);\n  }, [connection, transformNode]);\n\n  const loadingMore = networkStatus === (3 as NetworkStatus); // fetchMore\n\n  return {\n    rows,\n    loading,\n    loadingMore,\n    error: (error as Error) ?? null,\n    pageInfo: connection?.pageInfo,\n    refetch,\n    fetchMore,\n    networkStatus,\n  };\n}\n"})}),"\n",(0,s.jsx)(n.p,{children:"Example with GraphQL connection"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { useQuery } from '@apollo/client';\nimport { useTableData } from 'src/shared-components/DataTable/hooks/useTableData';\nimport { DataTable } from 'src/shared-components/DataTable/DataTable';\nimport type { PageInfo } from 'src/shared-components/DataTable/types';\n\ntype User = { id: string; name: string; email: string };\ntype UsersQuery = {\n  users?: {\n    edges?: Array<{ node: User | null } | null> | null;\n    pageInfo?: PageInfo | null;\n  } | null;\n};\n\nconst result = useQuery<UsersQuery>(/* GET_USERS */);\nconst { rows, pageInfo, loadingMore } = useTableData<UsersQuery, User, User>(result, {\n  path: ['users'],\n  transformNode: (n) => n,\n});\n\n<DataTable<User>\n  data={rows}\n  columns={[nameCol, emailCol]}\n  rowKey=\"id\"\n  paginationMode=\"server\"\n  pageInfo={pageInfo}\n  loadingMore={loadingMore}\n  onLoadMore={() => result.fetchMore({ variables: { after: pageInfo?.endCursor } })}\n/>;\n"})}),"\n",(0,s.jsx)(n.h2,{id:"pagination",children:"Pagination"}),"\n",(0,s.jsx)(n.p,{children:"The DataTable supports both client-side and server-side pagination for consistent UX across screens."}),"\n",(0,s.jsx)(n.h3,{id:"client-side-pagination",children:"Client-side Pagination"}),"\n",(0,s.jsx)(n.p,{children:"Use for small datasets. Data is sliced in memory."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'import { DataTable } from \'src/shared-components/DataTable/DataTable\';\n\n<DataTable<User>\n  data={users}\n  columns={[nameCol, emailCol]}\n  rowKey="id"\n  paginationMode="client"\n  pageSize={10}\n/>;\n'})}),"\n",(0,s.jsx)(n.h3,{id:"server-side-pagination-graphql-cursor",children:"Server-side Pagination (GraphQL cursor)"}),"\n",(0,s.jsxs)(n.p,{children:["Use for large datasets. Relies on GraphQL-style ",(0,s.jsx)(n.code,{children:"pageInfo"})," and ",(0,s.jsx)(n.code,{children:"onLoadMore"}),"."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'<DataTable<User>\n  data={rows}\n  columns={[nameCol]}\n  rowKey="id"\n  paginationMode="server"\n  pageInfo={pageInfo}\n  loadingMore={loadingMore}\n  onLoadMore={() => fetchMore({ variables: { after: pageInfo?.endCursor } })}\n/>\n'})}),"\n",(0,s.jsx)(n.h3,{id:"accessibility-notes",children:"Accessibility notes"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Pagination controls use ",(0,s.jsx)(n.code,{children:"aria-label"})," and ",(0,s.jsx)(n.code,{children:"aria-live"})," for screen reader support."]}),"\n",(0,s.jsx)(n.li,{children:"Disabled states are set for prev/next buttons on first/last page."}),"\n",(0,s.jsxs)(n.li,{children:['The "Load more" button in server mode uses ',(0,s.jsx)(n.code,{children:"aria-busy"})," and disables while loading."]}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{title:"Trade-offs",type:"note",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Client mode: simple and fast for small datasets; slices in memory."}),"\n",(0,s.jsx)(n.li,{children:"Server mode: required for large lists; relies on pageInfo and onLoadMore."}),"\n"]})}),"\n",(0,s.jsx)(n.h2,{id:"loading-state-optimizations",children:"Loading state optimizations"}),"\n",(0,s.jsx)(n.p,{children:"Optimized loading states prevent layout shift and improve perceived performance. Skeleton rows match the table's column structure."}),"\n",(0,s.jsx)(n.h3,{id:"initial-load-skeleton",children:"Initial load skeleton"}),"\n",(0,s.jsxs)(n.p,{children:["When ",(0,s.jsx)(n.code,{children:"loading=true"})," and no data yet, displays a skeleton grid."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"<DataTable<User>\n  data={[]}\n  columns={[nameCol, emailCol]}\n  loading\n  skeletonRows={5}  // default: 5\n/>\n"})}),"\n",(0,s.jsx)(n.h3,{id:"refetch-overlay",children:"Refetch overlay"}),"\n",(0,s.jsxs)(n.p,{children:["When ",(0,s.jsx)(n.code,{children:"loading=true"})," AND data already present, shows a translucent overlay with skeleton grid on top of existing rows.\nThis avoids content jump during refresh."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"<DataTable<User>\n  data={users}\n  columns={[nameCol, emailCol]}\n  loading\n  loadingOverlay  // true to show overlay\n/>\n"})}),"\n",(0,s.jsx)(n.h3,{id:"partial-loading-fetchmore",children:"Partial loading (fetchMore)"}),"\n",(0,s.jsxs)(n.p,{children:["When ",(0,s.jsx)(n.code,{children:"loadingMore=true"}),", appends skeleton rows at the bottom of the table to indicate incremental data fetching."]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"<DataTable<User>\n  data={users}\n  columns={[nameCol, emailCol]}\n  loadingMore  // append skeleton rows\n  skeletonRows={5}\n/>\n"})}),"\n",(0,s.jsx)(n.h3,{id:"accessibility--styling",children:"Accessibility & styling"}),"\n",(0,s.jsx)(n.p,{children:"Skeleton cells render with:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:'aria-hidden="true"'})," (visual placeholder, not announced)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:'role="status"'})," + ",(0,s.jsx)(n.code,{children:'aria-live="polite"'})," (grid announces loading to screen readers)"]}),"\n",(0,s.jsx)(n.li,{children:"Shimmer animation (linear gradient) for visual feedback"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Essential CSS extracts:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-css",children:"/* src/shared-components/DataTable/DataTable.module.css */\n@keyframes shimmer {\n  0% {\n    background-position: 0% 50%;\n  }\n  100% {\n    background-position: 200% 50%;\n  }\n}\n.dataSkeletonCell {\n  height: 16px;\n  border-radius: 6px;\n  background: linear-gradient(90deg, #eee 0%, #f5f5f5 50%, #eee 100%);\n  background-size: 200% 100%;\n  animation: shimmer 1.2s ease-in-out infinite;\n}\n.dataLoadingOverlay {\n  position: absolute;\n  inset: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: rgba(255, 255, 255, 0.6);\n  backdrop-filter: blur(1px);\n  pointer-events: none;\n  z-index: 10;\n  border-radius: 6px;\n}\n"})}),"\n",(0,s.jsx)(n.h3,{id:"tableloader-component",children:"TableLoader component"}),"\n",(0,s.jsx)(n.p,{children:"For reusable skeleton grids (e.g., in dialogs or custom loading states):"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import { TableLoader } from 'src/shared-components/DataTable/TableLoader';\n\n// Grid variant (no overlay)\n<TableLoader columns={columns} rows={5} ariaLabel=\"Loading users\" />\n\n// Overlay variant (translucent with grid)\n<TableLoader columns={columns} rows={3} asOverlay />\n"})}),"\n",(0,s.jsx)(n.h2,{id:"sorting",children:"Sorting"}),"\n",(0,s.jsx)(n.p,{children:"Enable per\u2011column sorting and optional custom comparators."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"const columns: Array<ColumnDef<User>> = [\n  { id: 'name', header: 'Name', accessor: 'name', meta: { sortable: true } },\n  {\n    id: 'email',\n    header: 'Email',\n    accessor: (u) => u.email,\n    meta: { sortable: true },\n  },\n  {\n    id: 'len',\n    header: 'Name Len',\n    accessor: (u) => u.name,\n    meta: { sortable: true, sortFn: (a, b) => a.name.length - b.name.length },\n  },\n];\n\n<DataTable<User> data={users} columns={columns} rowKey=\"id\" />;\n"})}),"\n",(0,s.jsx)(n.p,{children:"Server\u2011side sorting (no local reorder)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'<DataTable<User>\n  data={users}\n  columns={columns}\n  serverSort\n  sortBy="name"\n  sortDirection="asc"\n  onSortChange={({ sortBy, sortDirection }) => {\n    // refetch with variables { orderBy: { [sortBy]: sortDirection } }\n  }}\n/>\n'})}),"\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsx)(n.p,{children:"Default comparator is stable, case\u2011insensitive for strings, and places null/undefined last.\nUse meta.sortFn for domain\u2011specific ordering."})}),"\n",(0,s.jsx)(n.h2,{id:"filtering-and-global-search",children:"Filtering and Global Search"}),"\n",(0,s.jsx)(n.p,{children:"Per\u2011column filtering and global search against searchable columns."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"const columns: Array<ColumnDef<User>> = [\n  {\n    id: 'name',\n    header: 'Name',\n    accessor: 'name',\n    meta: { filterable: true, searchable: true },\n  },\n  {\n    id: 'email',\n    header: 'Email',\n    accessor: 'email',\n    meta: { filterable: true, searchable: true },\n  },\n  {\n    id: 'adult',\n    header: 'Adult?',\n    accessor: (u) => (u.age ?? 0) >= 18,\n    meta: {\n      filterable: true,\n      searchable: false,\n      filterFn: (row, val) =>\n        val === 'yes'\n          ? (row.age ?? 0) >= 18\n          : val === 'no'\n            ? (row.age ?? 0) < 18\n            : true,\n    },\n  },\n  {\n    id: 'complex',\n    header: 'Complex',\n    accessor: 'complexData',\n    meta: {\n      getSearchValue: (row) => row.complexData?.label ?? '',\n    },\n  },\n];\n\n<DataTable<User>\n  data={users}\n  columns={columns}\n  rowKey=\"id\"\n  showSearch\n  initialGlobalSearch=\"\"\n  columnFilters={{ name: 'ada' }}\n/>;\n"})}),"\n",(0,s.jsx)(n.p,{children:"Server modes: don\u2019t filter locally, just emit changes."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'<DataTable<User>\n  data={users}\n  columns={columns}\n  showSearch\n  globalSearch=""\n  onGlobalSearchChange={(q) => /* refetch with q */ null}\n  columnFilters={{}}\n  onColumnFiltersChange={(f) => /* refetch with f */ null}\n  serverSearch\n  serverFilter\n/>\n'})}),"\n",(0,s.jsx)(n.h2,{id:"selection-row-actions-and-bulk-actions",children:"Selection, Row Actions, and Bulk Actions"}),"\n",(0,s.jsx)(n.p,{children:"Enable selection, add row actions, and bulk actions for selected rows."}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:"import type {\n  IRowAction,\n  IBulkAction,\n} from 'src/types/shared-components/DataTable/interface';\n\nconst rowActions: IRowAction<User>[] = [\n  { id: 'open', label: 'Open', onClick: (u) => console.log('open', u.id) },\n  {\n    id: 'disable',\n    label: 'Disable',\n    onClick: (u) => console.log('disable', u.id),\n    disabled: (u) => u.email.endsWith('@example.com'),\n  },\n];\n\nconst bulkActions: IBulkAction<User>[] = [\n  {\n    id: 'export',\n    label: 'Export CSV',\n    onClick: (rows) => console.log('export', rows.length),\n  },\n  {\n    id: 'remove',\n    label: 'Remove',\n    confirm: 'Remove selected users?',\n    onClick: (rows, keys) => console.log('remove', keys),\n  },\n];\n\n<DataTable<User>\n  data={users}\n  columns={[nameCol, emailCol]}\n  rowKey=\"id\"\n  selectable\n  rowActions={rowActions}\n  bulkActions={bulkActions}\n/>;\n"})}),"\n",(0,s.jsx)(n.h2,{id:"accessibility",children:"Accessibility"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:'Errors: role="alert" and aria\u2011live="assertive"'}),"\n",(0,s.jsx)(n.li,{children:'Loading/empty: aria\u2011busy and aria\u2011live="polite"'}),"\n",(0,s.jsx)(n.li,{children:"Sortable headers: set aria\u2011sort to ascending/descending/none"}),"\n",(0,s.jsx)(n.li,{children:'Search input: role="searchbox" via type="search" and explicit aria\u2011label'}),"\n",(0,s.jsx)(n.li,{children:"Selection: each checkbox has a readable label; header checkbox uses indeterminate state"}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsx)(n.p,{children:'Always provide a stable rowKey (e.g., "id") to keep focus and screen reader context consistent\nacross updates.'})}),"\n",(0,s.jsx)(n.h2,{id:"testing-and-coverage",children:"Testing and Coverage"}),"\n",(0,s.jsx)(n.p,{children:"Target: \u2265 95% coverage for files touched by table work."}),"\n",(0,s.jsx)(n.p,{children:"Recommended test areas"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Types sanity (compile smoke tests for ColumnDef/DataTableProps)"}),"\n",(0,s.jsx)(n.li,{children:"Rendering basics (headers, cell values; string and function accessors)"}),"\n",(0,s.jsx)(n.li,{children:"Precedence: error > loading > empty"}),"\n",(0,s.jsx)(n.li,{children:"Pagination: client slice, server load\u2011more, disabled edges"}),"\n",(0,s.jsx)(n.li,{children:"Loading: skeleton grid, overlay with existing rows, appended skeletons"}),"\n",(0,s.jsx)(n.li,{children:"Sorting: asc/desc toggle, custom sortFn, stability on ties, nulls last"}),"\n",(0,s.jsx)(n.li,{children:"Filtering/search: default contains, custom filterFn, server emit\u2011only"}),"\n",(0,s.jsx)(n.li,{children:"Selection/actions: single row, select\u2011all indeterminate, row actions, bulk actions"}),"\n",(0,s.jsx)(n.li,{children:"Accessibility roles/attributes (aria\u2011sort, aria\u2011live, checkbox labels)"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"performance--gotchas",children:"Performance & Gotchas"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Memoize columns with useMemo when defined inline to avoid re\u2011renders"}),"\n",(0,s.jsx)(n.li,{children:"Prefer lightweight cell renderers; avoid heavy closures in render()"}),"\n",(0,s.jsx)(n.li,{children:"Use stable rowKey to minimize DOM diffing and preserve selection/focus"}),"\n",(0,s.jsx)(n.li,{children:"For server pagination/sorting/filtering, debounce user input to reduce chatter"}),"\n",(0,s.jsx)(n.li,{children:"When using fetchMore, ensure notifyOnNetworkStatusChange is enabled if you rely on loadingMore"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"migration-guide-playbook",children:"Migration Guide (Playbook)"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Identify the screen\u2019s list query and row type T."}),"\n",(0,s.jsx)(n.li,{children:"Define columns: start with string accessors, add function accessors as needed."}),"\n",(0,s.jsx)(n.li,{children:"Replace bespoke markup with DataTable<T>, passing columns and data."}),"\n",(0,s.jsx)(n.li,{children:"Add empty/error handling via DataTable\u2019s built\u2011ins (remove local placeholders)."}),"\n",(0,s.jsxs)(n.li,{children:["Choose pagination mode:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Small list: client (pageSize)"}),"\n",(0,s.jsx)(n.li,{children:"Large/infinite: server (pageInfo, onLoadMore)"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Add sorting:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Client: meta.sortable (+ sortFn if needed)"}),"\n",(0,s.jsx)(n.li,{children:"Server: serverSort + onSortChange \u2192 refetch"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Add filtering/global search:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Local: showSearch + columnFilters / initialGlobalSearch"}),"\n",(0,s.jsx)(n.li,{children:"Server: serverSearch/serverFilter + emit callbacks \u2192 refetch"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.li,{children:"Add selection/actions if required: selectable, rowActions, bulkActions."}),"\n",(0,s.jsx)(n.li,{children:"Tests: cover precedence chains, key flows; reach \u2265 95% coverage."}),"\n",(0,s.jsx)(n.li,{children:"Remove legacy table utilities and dead styles."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Before \u2192 After (concise)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-tsx",children:'// Before: bespoke, no built-ins, ad-hoc loaders/errors\n<LegacyUsersTable users={data?.users ?? []} />\n\n// After: generic, consistent, extensible\n<DataTable<User>\n  data={rows}\n  columns={[nameCol, emailCol]}\n  rowKey="id"\n  paginationMode="server"\n  pageInfo={pageInfo}\n  onLoadMore={loadMore}\n/>\n'})}),"\n",(0,s.jsx)(n.h2,{id:"faq",children:"FAQ"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Why string vs function accessors?"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"String accessors are simple and optimal when mapping fields. Function accessors allow\ntransformations (e.g., formatting) without duplicating data."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"When should I choose server pagination/sort?"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Any list that can grow large or must reflect backend ordering/search should use server mode."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"How do I add a custom filter?"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Provide meta.filterFn per column. Return true to keep a row; value comes from columnFilters[id]."}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"How do I disable a bulk action conditionally?"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Supply a disabled predicate receiving selected rows and keys; return true to disable."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"changelog-by-phase-tablefix",children:"Changelog by Phase (TableFix)"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Phase 1","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Define Column System and TypeScript Interfaces"}),"\n",(0,s.jsx)(n.li,{children:"Build DataTable Component Structure"}),"\n",(0,s.jsx)(n.li,{children:"Add Empty State and Error Handling"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Phase 2","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Add Pagination Support"}),"\n",(0,s.jsx)(n.li,{children:"Create useTableData Hook"}),"\n",(0,s.jsx)(n.li,{children:"Add Loading State Optimizations"}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["Phase 3","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Implement Sorting Functionality"}),"\n",(0,s.jsx)(n.li,{children:"Add Filtering and Search Capabilities"}),"\n",(0,s.jsx)(n.li,{children:"Implement Row and Bulk Actions"}),"\n"]}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},29438:(e,n,a)=>{a.d(n,{R:()=>l,x:()=>o});var r=a(30758);const s={},i=r.createContext(s);function l(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);