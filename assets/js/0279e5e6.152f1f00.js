"use strict";(globalThis.webpackChunkdocs=globalThis.webpackChunkdocs||[]).push([[29294],{29438:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>l});var r=s(30758);const t={},a=r.createContext(t);function i(e){const n=r.useContext(a);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),r.createElement(a.Provider,{value:n},e.children)}},88010:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"docs/developer-resources/shared-components/tablefix-tables","title":"DataTable","description":"End\u2011to\u2011end guide to Talawa Admin\u2019s generic DataTable, including types, structure, empty/error states, pagination, loading, sorting, filtering/search, selection/actions, accessibility, testing, and migration patterns.","source":"@site/docs/docs/developer-resources/shared-components/tables.md","sourceDirName":"docs/developer-resources/shared-components","slug":"/developer-resources/shared-components/tables","permalink":"/docs/developer-resources/shared-components/tables","draft":false,"unlisted":false,"editUrl":"https://github.com/PalisadoesFoundation/talawa-admin/edit/develop/docs/docs/docs/developer-resources/shared-components/tables.md","tags":[{"inline":true,"label":"react","permalink":"/docs/tags/react"},{"inline":true,"label":"typescript","permalink":"/docs/tags/typescript"},{"inline":true,"label":"talawa-admin","permalink":"/docs/tags/talawa-admin"},{"inline":true,"label":"table","permalink":"/docs/tags/table"},{"inline":true,"label":"data","permalink":"/docs/tags/data"},{"inline":true,"label":"pagination","permalink":"/docs/tags/pagination"},{"inline":true,"label":"sorting","permalink":"/docs/tags/sorting"},{"inline":true,"label":"filtering","permalink":"/docs/tags/filtering"},{"inline":true,"label":"accessibility","permalink":"/docs/tags/accessibility"}],"version":"current","sidebarPosition":36,"frontMatter":{"id":"tablefix-tables","title":"DataTable","description":"End\u2011to\u2011end guide to Talawa Admin\u2019s generic DataTable, including types, structure, empty/error states, pagination, loading, sorting, filtering/search, selection/actions, accessibility, testing, and migration patterns.","slug":"/developer-resources/shared-components/tables","sidebar_position":36,"tags":["react","typescript","talawa-admin","table","data","pagination","sorting","filtering","accessibility"]},"sidebar":"tutorialSidebar","previous":{"title":"Plugin GraphQL Integration","permalink":"/docs/developer-resources/features/plugin-graphql-integration"},"next":{"title":"DataGridWrapper","permalink":"/docs/developer-resources/shared-components/data-grid-wrapper"}}');var t=s(86070),a=s(29438);const i={id:"tablefix-tables",title:"DataTable",description:"End\u2011to\u2011end guide to Talawa Admin\u2019s generic DataTable, including types, structure, empty/error states, pagination, loading, sorting, filtering/search, selection/actions, accessibility, testing, and migration patterns.",slug:"/developer-resources/shared-components/tables",sidebar_position:36,tags:["react","typescript","talawa-admin","table","data","pagination","sorting","filtering","accessibility"]},l=void 0,o={},d=[{value:"Introduction",id:"introduction",level:2},{value:"Overview",id:"overview",level:2},{value:"Quick Start (Minimal)",id:"quick-start-minimal",level:2},{value:"Types reference (authoritative)",id:"types-reference-authoritative",level:2},{value:"Short examples",id:"short-examples",level:3},{value:"File Structure and Components",id:"file-structure-and-components",level:2},{value:"Key internal components",id:"key-internal-components",level:3},{value:"Component: DataTable",id:"component-datatable",level:2},{value:"Hooks",id:"hooks",level:2},{value:"Hook: useTableData",id:"hook-usetabledata",level:3},{value:"Hook: useSimpleTableData",id:"hook-usesimpletabledata",level:3},{value:"Pagination",id:"pagination",level:2},{value:"Client-side Pagination",id:"client-side-pagination",level:3},{value:"Server-side Pagination (GraphQL cursor)",id:"server-side-pagination-graphql-cursor",level:3},{value:"Accessibility notes",id:"accessibility-notes",level:3},{value:"Loading state optimizations",id:"loading-state-optimizations",level:2},{value:"Initial load skeleton",id:"initial-load-skeleton",level:3},{value:"Refetch overlay",id:"refetch-overlay",level:3},{value:"Partial loading (fetchMore)",id:"partial-loading-fetchmore",level:3},{value:"Accessibility &amp; styling",id:"accessibility--styling",level:3},{value:"TableLoader component",id:"tableloader-component",level:3},{value:"Sorting",id:"sorting",level:2},{value:"Filtering and Global Search",id:"filtering-and-global-search",level:2},{value:"Selection, Row Actions, and Bulk Actions",id:"selection-row-actions-and-bulk-actions",level:2},{value:"Accessibility",id:"accessibility",level:2},{value:"Testing and Coverage",id:"testing-and-coverage",level:2},{value:"Performance &amp; Gotchas",id:"performance--gotchas",level:2},{value:"Migration Guide (Playbook)",id:"migration-guide-playbook",level:2},{value:"FAQ",id:"faq",level:2},{value:"Changelog by Phase (TableFix)",id:"changelog-by-phase-tablefix",level:2},{value:"Phase 5 Pilot: Detailed Patterns and Results",id:"phase-5-pilot-detailed-patterns-and-results",level:2},{value:"Pilot Screens Overview",id:"pilot-screens-overview",level:3},{value:"Users.tsx Pattern (Connection + Infinite Scroll)",id:"userstsx-pattern-connection--infinite-scroll",level:3},{value:"BlockUser.tsx Pattern (Dual-List Toggle)",id:"blockusertsx-pattern-dual-list-toggle",level:3},{value:"Requests.tsx Pattern (Simple Array Format)",id:"requeststsx-pattern-simple-array-format",level:3},{value:"Testing Patterns Established",id:"testing-patterns-established",level:3},{value:"1. Zero Fixed Waits",id:"1-zero-fixed-waits",level:4},{value:"2. Universal I18n Provider Coverage",id:"2-universal-i18n-provider-coverage",level:4},{value:"3. Distinct TestIDs",id:"3-distinct-testids",level:4},{value:"4. Proper Cleanup Hooks",id:"4-proper-cleanup-hooks",level:4},{value:"ErrorPanel Integration Pattern",id:"errorpanel-integration-pattern",level:3},{value:"Migration Metrics",id:"migration-metrics",level:3},{value:"Hook Selection Decision Tree",id:"hook-selection-decision-tree",level:3},{value:"Recommendations for Future Migrations",id:"recommendations-for-future-migrations",level:3},{value:"Organization and People Screens Migration Examples",id:"organization-and-people-screens-migration-examples",level:2},{value:"AddMember Modal Table (Phase 6)",id:"addmember-modal-table-phase-6",level:3},{value:"People List Screen (Phase 6)",id:"people-list-screen-phase-6",level:3},{value:"Key Migration Patterns",id:"key-migration-patterns",level:3},{value:"Testing DataTable Components",id:"testing-datatable-components",level:2},{value:"Core Testing Principles",id:"core-testing-principles",level:3},{value:"1. Always Use I18nextProvider",id:"1-always-use-i18nextprovider",level:4},{value:"2. Avoid Fixed Waits - Use waitFor Instead",id:"2-avoid-fixed-waits---use-waitfor-instead",level:4},{value:"3. TestID Naming Conventions",id:"3-testid-naming-conventions",level:4},{value:"4. Testing Loading States",id:"4-testing-loading-states",level:4},{value:"5. Testing Error States",id:"5-testing-error-states",level:4},{value:"6. Testing Empty States",id:"6-testing-empty-states",level:4},{value:"7. Testing Async User Interactions",id:"7-testing-async-user-interactions",level:4},{value:"8. Mock Cleanup Best Practices",id:"8-mock-cleanup-best-practices",level:4},{value:"Testing Pagination",id:"testing-pagination",level:3},{value:"Server-side Pagination (useTableData)",id:"server-side-pagination-usetabledata",level:4},{value:"Client-side Pagination",id:"client-side-pagination-1",level:4},{value:"Common Testing Pitfalls",id:"common-testing-pitfalls",level:3},{value:"Testing Checklist",id:"testing-checklist",level:3}];function c(e){const n={admonition:"admonition",code:"code",h2:"h2",h3:"h3",h4:"h4",input:"input",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"introduction",children:"Introduction"}),"\n",(0,t.jsx)(n.p,{children:"What you\u2019ll learn"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"How to define strongly\u2011typed table columns with string and function accessors"}),"\n",(0,t.jsx)(n.li,{children:"How to render the generic DataTable with empty/error handling"}),"\n",(0,t.jsx)(n.li,{children:"How to use client/server pagination and the useTableData hook"}),"\n",(0,t.jsx)(n.li,{children:"How to add loading skeletons and refetch overlays"}),"\n",(0,t.jsx)(n.li,{children:"How to enable sorting, filtering, global search, selection, and actions"}),"\n",(0,t.jsx)(n.li,{children:"How to test reliably with \u2265 95% coverage and migrate existing screens"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(n.p,{children:"The generic DataTable provides a single, shared, strongly typed table foundation for\nTalawa Admin. It replaces bespoke per\u2011screen tables with a consistent API for:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Type\u2011safe column definitions"}),"\n",(0,t.jsx)(n.li,{children:"Empty and error states"}),"\n",(0,t.jsx)(n.li,{children:"Client and server pagination"}),"\n",(0,t.jsx)(n.li,{children:"Loading skeletons/overlays"}),"\n",(0,t.jsx)(n.li,{children:"Sorting"}),"\n",(0,t.jsx)(n.li,{children:"Filtering and global search"}),"\n",(0,t.jsx)(n.li,{children:"Row selection, row actions, and bulk actions"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Architecture at a glance:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-mermaid",children:"flowchart LR\n  Q[GraphQL QueryResult] --\x3e H[useTableData]\n  H --\x3e|rows, pageInfo, loading| DT[DataTable]\n  DT --\x3e|onLoadMore/onSortChange| Q\n"})}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsx)(n.p,{children:"Base UI uses React\u2011Bootstrap\u2019s Table component to match the repo\u2019s existing styling and\nresponsiveness while keeping the API minimal and framework\u2011agnostic."})}),"\n",(0,t.jsx)(n.h2,{id:"quick-start-minimal",children:"Quick Start (Minimal)"}),"\n",(0,t.jsx)(n.p,{children:"Before \u2192 After"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"// Before (bespoke table; simplified)\n<Table>\n  <thead>\n    <tr>\n      <th>Name</th>\n      <th>Email</th>\n    </tr>\n  </thead>\n  <tbody>\n    {users.map((u) => (\n      <tr key={u.id}>\n        <td>{u.name}</td>\n        <td>{u.email}</td>\n      </tr>\n    ))}\n  </tbody>\n</Table>\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"// After (generic DataTable)\nimport { DataTable } from 'src/shared-components/DataTable/DataTable';\nimport type { ColumnDef } from 'src/shared-components/DataTable/types';\n\ntype User = { id: string; name: string; email: string };\n\nconst columns: Array<ColumnDef<User>> = [\n  { id: 'name', header: 'Name', accessor: 'name' },\n  { id: 'email', header: 'Email', accessor: (u) => u.email.toLowerCase() },\n];\n\n<DataTable<User>\n  data={[{ id: '1', name: 'Ada', email: 'Ada@Example.com' }]}\n  columns={columns}\n  rowKey=\"id\"\n/>;\n"})}),"\n",(0,t.jsx)(n.h2,{id:"types-reference-authoritative",children:"Types reference (authoritative)"}),"\n",(0,t.jsx)(n.p,{children:"Core types used throughout the generic table system."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"// Accessors\nexport type Accessor<T> = keyof T | ((row: T) => unknown);\nexport type AccessorValue<T, A extends Accessor<T>> = A extends keyof T\n  ? T[A]\n  : A extends (row: T) => infer R\n    ? R\n    : unknown;\n\n// Sorting\nexport type SortDirection = 'asc' | 'desc';\n\n// Column definition\nexport interface ColumnDef<T, A extends Accessor<T> = Accessor<T>> {\n  id: string;\n  header: string | (() => React.ReactNode);\n  accessor: A;\n  render?: (value: AccessorValue<T, A>, row: T) => React.ReactNode;\n  meta?: {\n    sortable?: boolean;\n    sortFn?: (a: T, b: T) => number;\n    filterable?: boolean;\n    searchable?: boolean;\n    filterFn?: (row: T, value: unknown) => boolean;\n    getSearchValue?: (row: T) => string;\n    width?: string | number;\n    align?: 'left' | 'center' | 'right';\n    ariaLabel?: string;\n  };\n}\n\nexport interface PageInfo {\n  hasNextPage: boolean;\n  hasPreviousPage: boolean;\n  startCursor?: string;\n  endCursor?: string;\n}\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"// DataTable props (key fields)\nexport interface DataTableProps<T> {\n  data: readonly T[];\n  columns: readonly ColumnDef<T>[];\n  loading?: boolean;\n  error?: Error | null;\n  renderError?: (error: Error) => React.ReactNode;\n  rowKey?: keyof T | ((row: T) => string | number);\n  emptyMessage?: string;\n\n  // Pagination\n  paginationMode?: 'client' | 'server';\n  pageSize?: number;\n  currentPage?: number;\n  onPageChange?: (page: number) => void;\n  totalItems?: number;\n  pageInfo?: PageInfo;\n  onLoadMore?: () => void;\n  loadingMore?: boolean;\n\n  // Loading optimizations\n  /**\n   * Number of skeleton rows to render during loading/overlay states.\n   * Default: 5\n   */\n  skeletonRows?: number;\n  /**\n   * When true and data is already present, show a translucent overlay on top of the table\n   * while a refetch is in flight. Overlay displays skeleton grid matching table columns.\n   */\n  loadingOverlay?: boolean;\n  /**\n   * When true, append skeleton rows at the end of the table body to indicate a partial\n   * loading state (e.g., while fetchMore is running in incremental pagination).\n   */\n  loadingMore?: boolean;\n\n  // Sorting\n  serverSort?: boolean;\n  sortBy?: string;\n  sortDirection?: SortDirection;\n  onSortChange?: (next: {\n    sortBy: string;\n    sortDirection: SortDirection;\n    column: ColumnDef<T>;\n  }) => void;\n  initialSortBy?: string;\n  initialSortDirection?: SortDirection;\n\n  // Filtering & search\n  showSearch?: boolean;\n  searchPlaceholder?: string;\n  globalSearch?: string;\n  onGlobalSearchChange?: (q: string) => void;\n  initialGlobalSearch?: string;\n  columnFilters?: Record<string, unknown>;\n  onColumnFiltersChange?: (filters: Record<string, unknown>) => void;\n  serverSearch?: boolean;\n  serverFilter?: boolean;\n\n  // Selection & actions\n  selectable?: boolean;\n  selectedKeys?: ReadonlySet<string | number>;\n  onSelectionChange?: (next: ReadonlySet<string | number>) => void;\n  initialSelectedKeys?: ReadonlySet<string | number>;\n  rowActions?: ReadonlyArray<RowAction<T>>;\n  bulkActions?: ReadonlyArray<BulkAction<T>>;\n}\n\nexport type Key = string | number;\n\nexport type RowAction<T> = {\n  id: string;\n  label: string;\n  onClick: (row: T) => void;\n  disabled?: boolean | ((row: T) => boolean);\n  ariaLabel?: string;\n};\n\nexport type BulkAction<T> = {\n  id: string;\n  label: string;\n  onClick: (rows: T[], keys: Key[]) => void | Promise<void>;\n  disabled?: boolean | ((rows: T[], keys: Key[]) => boolean);\n  confirm?: string;\n};\n\nexport interface TableState<T = unknown> {\n  sortBy?: string;\n  sortDirection?: SortDirection;\n  filters?: Partial<Record<string, unknown>>;\n  globalSearch?: string;\n  selectedKeys?: Set<Key>;\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"short-examples",children:"Short examples"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"// String and function accessors\nconst nameCol = { id: 'name', header: 'Name', accessor: 'name' } as const;\nconst emailCol = {\n  id: 'email',\n  header: 'Email',\n  accessor: (u: User) => u.email.toLowerCase(),\n} as const;\n"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"// Sort by string length via custom comparator\nconst byLen = {\n  id: 'custom',\n  header: 'Custom',\n  accessor: (u: User) => u.name,\n  meta: {\n    sortable: true,\n    sortFn: (a: User, b: User) => a.name.length - b.name.length,\n  },\n};\n"})}),"\n",(0,t.jsx)(n.h2,{id:"file-structure-and-components",children:"File Structure and Components"}),"\n",(0,t.jsx)(n.p,{children:"The DataTable is composed of the following modules:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"src/shared-components/DataTable/\n\u251c\u2500\u2500 DataTable.tsx                 # Main component: orchestrates layout, state\n\u251c\u2500\u2500 DataTableTable.tsx            # Presentational: renders <table> with headers, rows\n\u251c\u2500\u2500 DataTableSkeleton.tsx         # Skeleton loading state (initial load)\n\u251c\u2500\u2500 LoadingMoreRows.tsx           # Appended skeleton rows (fetchMore state)\n\u251c\u2500\u2500 SearchBar.tsx                 # Search input with debouncing\n\u251c\u2500\u2500 Pagination.tsx                # Pagination controls (client and server modes)\n\u251c\u2500\u2500 BulkActionsBar.tsx            # Bulk action buttons (when rows selected)\n\u251c\u2500\u2500 cells/ActionsCell.tsx         # Cell renderer for row action buttons\n\u251c\u2500\u2500 hooks/useTableData.ts         # Flattens GraphQL connections \u2192 rows\n\u251c\u2500\u2500 hooks/useDataTableFiltering.ts  # Manages search, column filters\n\u251c\u2500\u2500 hooks/useDataTableSelection.ts  # Manages row selection state\n\u251c\u2500\u2500 TableLoader.tsx               # Reusable skeleton grid (utility)\n\u251c\u2500\u2500 types.ts                      # Type definitions for hooks/utilities\n\u251c\u2500\u2500 utils.ts                      # Helpers: renderHeader, getCellValue, toSearchableString\n\u251c\u2500\u2500 [module].module.css           # Per\u2011component CSS (compose app-fixed)\n\u2514\u2500\u2500 types/                        # Type aliases and interfaces\n    \u2514\u2500\u2500 interface.ts              # ColumnDef, DataTableProps, etc.\n"})}),"\n",(0,t.jsx)(n.h3,{id:"key-internal-components",children:"Key internal components"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"DataTable"}),": Main orchestrator; manages loading states, pagination, sorting, filtering."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"DataTableTable"}),": Presentational component rendering ",(0,t.jsx)(n.code,{children:"<table>"})," with headers, rows, and selection column."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"DataTableSkeleton"}),": Renders skeleton rows during initial load (loading=true, no data yet)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"LoadingMoreRows"}),": Appends skeleton rows at the end during fetchMore operations (loadingMore=true)."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"SearchBar"}),": Global search input with debounce; emits to parent via onGlobalSearchChange."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Pagination"}),': Pagination controls (prev/next buttons for client mode; "Load more" for server).']}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"BulkActionsBar"}),": Shows when rows are selected; triggers bulk action callbacks."]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"ActionsCell"}),": Renders individual row action buttons."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"component-datatable",children:"Component: DataTable"}),"\n",(0,t.jsx)(n.p,{children:"The DataTable renders headers and rows from your typed column definitions. It includes built\u2011in\nempty/error precedence: error > loading > empty > table."}),"\n",(0,t.jsx)(n.p,{children:"Key props (ergonomics\u2011focused):"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Prop"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Default"}),(0,t.jsx)(n.th,{children:"Notes"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"data"}),(0,t.jsx)(n.td,{children:"readonly T[]"}),(0,t.jsx)(n.td,{children:"[]"}),(0,t.jsx)(n.td,{children:"Rows to display"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"columns"}),(0,t.jsx)(n.td,{children:"ColumnDef<T>[]"}),(0,t.jsx)(n.td,{children:"\u2014"}),(0,t.jsx)(n.td,{children:"Column configuration"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"rowKey"}),(0,t.jsx)(n.td,{children:"keyof T or fn"}),(0,t.jsx)(n.td,{children:"index"}),(0,t.jsx)(n.td,{children:"Stable keys recommended"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"loading"}),(0,t.jsx)(n.td,{children:"boolean"}),(0,t.jsx)(n.td,{children:"false"}),(0,t.jsx)(n.td,{children:"Shows loading state"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"error"}),(0,t.jsx)(n.td,{children:"Error or null"}),(0,t.jsx)(n.td,{children:"null"}),(0,t.jsx)(n.td,{children:"Renders error region"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"emptyMessage"}),(0,t.jsx)(n.td,{children:"string"}),(0,t.jsx)(n.td,{children:'"No data available"'}),(0,t.jsx)(n.td,{children:"Shown when no rows"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"paginationMode"}),(0,t.jsx)(n.td,{children:"'client' | 'server'"}),(0,t.jsx)(n.td,{children:"\u2014"}),(0,t.jsx)(n.td,{children:"See Pagination"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"serverSort"}),(0,t.jsx)(n.td,{children:"boolean"}),(0,t.jsx)(n.td,{children:"false"}),(0,t.jsx)(n.td,{children:"Use onSortChange for SSR"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"showSearch"}),(0,t.jsx)(n.td,{children:"boolean"}),(0,t.jsx)(n.td,{children:"false"}),(0,t.jsx)(n.td,{children:"Renders search bar"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"selectable"}),(0,t.jsx)(n.td,{children:"boolean"}),(0,t.jsx)(n.td,{children:"false"}),(0,t.jsx)(n.td,{children:"Enables selection column"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:"Minimal structure example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'import { DataTable } from \'src/shared-components/DataTable/DataTable\';\n\n<DataTable<User>\n  data={users}\n  columns={[nameCol, emailCol]}\n  loading={false}\n  emptyMessage="Nothing to show"\n  rowKey="id"\n/>;\n'})}),"\n",(0,t.jsx)(n.p,{children:"Empty and Error"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"<DataTable<User>\n  data={[]}\n  columns={[nameCol]}\n  loading={false}\n  emptyMessage=\"No users\"\n/>\n\n<DataTable<User>\n  data={[]}\n  columns={[nameCol]}\n  error={new Error('Network timeout')}\n/>\n"})}),"\n",(0,t.jsx)(n.h2,{id:"hooks",children:"Hooks"}),"\n",(0,t.jsx)(n.p,{children:"This section explains how we use hooks in the table related components."}),"\n",(0,t.jsx)(n.h3,{id:"hook-usetabledata",children:"Hook: useTableData"}),"\n",(0,t.jsx)(n.p,{children:"The useTableData hook flattens GraphQL connections (edges \u2192 rows) and exposes pagination signals."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"import { useMemo } from 'react';\nimport type { QueryResult, NetworkStatus } from '@apollo/client';\nimport type { PageInfo } from '../types';\n\ntype Edge<T> = { node: T | null } | null;\ntype Connection<T> =\n  | { edges?: Array<Edge<T>> | null; pageInfo?: PageInfo | null }\n  | null\n  | undefined;\n\nexport interface UseTableDataOptions<TNode, TRow, TData> {\n  path: ((data: TData) => Connection<TNode> | undefined) | (string | number)[];\n  transformNode?: (node: TNode) => TRow;\n  deps?: ReadonlyArray<unknown>;\n}\n\nexport function useTableData<TData = unknown, TRow = unknown, TNode = unknown>(\n  result: QueryResult<TData>,\n  options: UseTableDataOptions<TNode, TRow, TData>,\n) {\n  const { data, loading, error, refetch, fetchMore, networkStatus } = result;\n  const { path, transformNode, deps = [] } = options;\n\n  const getConnection = (d: TData): Connection<TNode> =>\n    typeof path === 'function'\n      ? path(d)\n      : path.reduce<unknown>(\n          (acc, k) =>\n            acc != null && typeof acc === 'object'\n              ? (acc as Record<string | number, unknown>)[k]\n              : undefined,\n          d as unknown,\n        );\n\n  const connection = useMemo(() => getConnection(data), [data, ...deps]);\n\n  const rows = useMemo<TRow[]>(() => {\n    const nodes = (connection?.edges ?? [])\n      .filter(Boolean)\n      .map((e: any) => e?.node)\n      .filter(Boolean) as TNode[];\n    const map = transformNode ?? ((n: unknown) => n as unknown as TRow);\n    return nodes.map(map);\n  }, [connection, transformNode]);\n\n  const loadingMore = networkStatus === (3 as NetworkStatus); // fetchMore\n\n  return {\n    rows,\n    loading,\n    loadingMore,\n    error: (error as Error) ?? null,\n    pageInfo: connection?.pageInfo,\n    refetch,\n    fetchMore,\n    networkStatus,\n  };\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"Example with GraphQL connection"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import { useQuery } from '@apollo/client';\nimport { useTableData } from 'src/shared-components/DataTable/hooks/useTableData';\nimport { DataTable } from 'src/shared-components/DataTable/DataTable';\nimport type { PageInfo } from 'src/shared-components/DataTable/types';\n\ntype User = { id: string; name: string; email: string };\ntype UsersQuery = {\n  users?: {\n    edges?: Array<{ node: User | null } | null> | null;\n    pageInfo?: PageInfo | null;\n  } | null;\n};\n\nconst result = useQuery<UsersQuery>(/* GET_USERS */);\nconst { rows, pageInfo, loadingMore } = useTableData<UsersQuery, User, User>(\n  result,\n  {\n    path: ['users'],\n    transformNode: (n) => n,\n  },\n);\n\n<DataTable<User>\n  data={rows}\n  columns={[nameCol, emailCol]}\n  rowKey=\"id\"\n  paginationMode=\"server\"\n  pageInfo={pageInfo}\n  loadingMore={loadingMore}\n  onLoadMore={() =>\n    result.fetchMore({ variables: { after: pageInfo?.endCursor } })\n  }\n/>;\n"})}),"\n",(0,t.jsx)(n.h3,{id:"hook-usesimpletabledata",children:"Hook: useSimpleTableData"}),"\n",(0,t.jsx)(n.admonition,{title:"When to use useSimpleTableData",type:"note",children:(0,t.jsxs)(n.p,{children:["Use ",(0,t.jsx)(n.code,{children:"useSimpleTableData"})," for GraphQL queries that return ",(0,t.jsx)(n.strong,{children:"simple arrays"})," (not connection format).\nFor queries with edges/pageInfo, use ",(0,t.jsx)(n.code,{children:"useTableData"})," instead."]})}),"\n",(0,t.jsx)(n.p,{children:"The useSimpleTableData hook integrates array-based GraphQL queries with DataTable. It provides a consistent interface for data extraction, loading states, and error handling."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Use cases:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Queries returning simple arrays: ",(0,t.jsx)(n.code,{children:"data.organization.membershipRequests"})]}),"\n",(0,t.jsx)(n.li,{children:"Small datasets without pagination"}),"\n",(0,t.jsx)(n.li,{children:"Legacy queries not yet migrated to connection format"}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"import { useMemo } from 'react';\nimport type { QueryResult, ApolloError } from '@apollo/client';\n\nexport interface IUseSimpleTableDataOptions<TRow, TData> {\n  /**\n   * Path function to extract array data from GraphQL response.\n   * IMPORTANT: Must be memoized with useCallback for stable reference.\n   */\n  path: (data: TData) => TRow[] | undefined | null;\n}\n\nexport interface IUseSimpleTableDataResult<TRow, TData> {\n  rows: TRow[];\n  loading: boolean;\n  error: ApolloError | undefined;\n  /**\n   * Function to refetch the query.\n   * Returns a Promise that resolves with Apollo query result.\n   */\n  refetch: QueryResult<TData>['refetch'];\n}\n\nexport function useSimpleTableData<TRow = unknown, TData = unknown>(\n  result: QueryResult<TData>,\n  options: IUseSimpleTableDataOptions<TRow, TData>,\n): IUseSimpleTableDataResult<TRow, TData> {\n  const { data, loading, error, refetch } = result;\n  const { path } = options;\n\n  // Extract rows using the path function\n  // Note: path must be memoized by caller (useCallback) for stable reference\n  const rows = useMemo<TRow[]>(() => {\n    if (!data) return [];\n    const extracted = path(data);\n    return extracted ?? [];\n  }, [data, path]);\n\n  return { rows, loading, error, refetch };\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"Example with array-based GraphQL query"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import { useQuery } from '@apollo/client';\nimport { useCallback, useMemo } from 'react';\nimport { useSimpleTableData } from 'src/shared-components/DataTable/hooks/useSimpleTableData';\nimport { DataTable } from 'src/shared-components/DataTable/DataTable';\n\ninterface InterfaceRequestsListItem {\n  membershipRequestId: string;\n  status: string;\n  user: {\n    id: string;\n    name: string;\n    emailAddress: string;\n  };\n}\n\ninterface InterfaceMembershipRequestsQueryData {\n  organization?: {\n    membershipRequests?: InterfaceRequestsListItem[];\n  } | null;\n}\n\n// Query returns simple array, not connection format\nconst result = useQuery<InterfaceMembershipRequestsQueryData>(\n  MEMBERSHIP_REQUEST_PG,\n  {\n    variables: { input: { id: orgId }, first: 10 },\n  },\n);\n\n// IMPORTANT: Memoize path function for stable reference (required)\nconst extractRequests = useCallback(\n  (data: InterfaceMembershipRequestsQueryData) =>\n    data?.organization?.membershipRequests ?? [],\n  [],\n);\n\nconst { rows, loading, error, refetch } = useSimpleTableData<\n  InterfaceRequestsListItem,\n  InterfaceMembershipRequestsQueryData\n>(result, {\n  path: extractRequests,\n});\n\n// Optional: filter or transform rows\nconst displayedRows = useMemo(\n  () => rows.filter((req) => req.status === 'pending'),\n  [rows],\n);\n\n<DataTable<InterfaceRequestsListItem>\n  data={displayedRows}\n  columns={columns}\n  rowKey=\"membershipRequestId\"\n  loading={loading}\n  error={error}\n  emptyMessage=\"No pending requests\"\n/>;\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Comparison: useTableData vs useSimpleTableData"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Feature"}),(0,t.jsx)(n.th,{children:"useTableData"}),(0,t.jsx)(n.th,{children:"useSimpleTableData"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Query format"})}),(0,t.jsx)(n.td,{children:"Connection (edges/pageInfo)"}),(0,t.jsx)(n.td,{children:"Simple array"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Pagination"})}),(0,t.jsx)(n.td,{children:"Server-side (cursor-based)"}),(0,t.jsx)(n.td,{children:"Client-side or none"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Returns"})}),(0,t.jsx)(n.td,{children:"rows, pageInfo, loadingMore, fetchMore"}),(0,t.jsx)(n.td,{children:"rows, loading, error, refetch"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Error type"})}),(0,t.jsx)(n.td,{children:"Error | null"}),(0,t.jsx)(n.td,{children:"ApolloError | undefined"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Refetch type"})}),(0,t.jsx)(n.td,{children:"QueryResult refetch (Promise)"}),(0,t.jsx)(n.td,{children:"QueryResult refetch (Promise)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Path function"})}),(0,t.jsx)(n.td,{children:"Can be inline or memoized"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Must be memoized with useCallback"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Use case"})}),(0,t.jsx)(n.td,{children:"Large datasets, infinite scroll"}),(0,t.jsx)(n.td,{children:"Small datasets, simple lists"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Example"})}),(0,t.jsx)(n.td,{children:"Users list with pagination"}),(0,t.jsx)(n.td,{children:"Membership requests"})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"pagination",children:"Pagination"}),"\n",(0,t.jsx)(n.p,{children:"The DataTable supports both client-side and server-side pagination for consistent UX across screens."}),"\n",(0,t.jsx)(n.h3,{id:"client-side-pagination",children:"Client-side Pagination"}),"\n",(0,t.jsx)(n.p,{children:"Use for small datasets. Data is sliced in memory."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'import { DataTable } from \'src/shared-components/DataTable/DataTable\';\n\n<DataTable<User>\n  data={users}\n  columns={[nameCol, emailCol]}\n  rowKey="id"\n  paginationMode="client"\n  pageSize={10}\n/>;\n'})}),"\n",(0,t.jsx)(n.h3,{id:"server-side-pagination-graphql-cursor",children:"Server-side Pagination (GraphQL cursor)"}),"\n",(0,t.jsxs)(n.p,{children:["Use for large datasets. Relies on GraphQL-style ",(0,t.jsx)(n.code,{children:"pageInfo"})," and ",(0,t.jsx)(n.code,{children:"onLoadMore"}),"."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'<DataTable<User>\n  data={rows}\n  columns={[nameCol]}\n  rowKey="id"\n  paginationMode="server"\n  pageInfo={pageInfo}\n  loadingMore={loadingMore}\n  onLoadMore={() => fetchMore({ variables: { after: pageInfo?.endCursor } })}\n/>\n'})}),"\n",(0,t.jsx)(n.h3,{id:"accessibility-notes",children:"Accessibility notes"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Pagination controls use ",(0,t.jsx)(n.code,{children:"aria-label"})," and ",(0,t.jsx)(n.code,{children:"aria-live"})," for screen reader support."]}),"\n",(0,t.jsx)(n.li,{children:"Disabled states are set for prev/next buttons on first/last page."}),"\n",(0,t.jsxs)(n.li,{children:['The "Load more" button in server mode uses ',(0,t.jsx)(n.code,{children:"aria-busy"})," and disables while loading."]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{title:"Trade-offs",type:"note",children:(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Client mode: simple and fast for small datasets; slices in memory."}),"\n",(0,t.jsx)(n.li,{children:"Server mode: required for large lists; relies on pageInfo and onLoadMore."}),"\n"]})}),"\n",(0,t.jsx)(n.h2,{id:"loading-state-optimizations",children:"Loading state optimizations"}),"\n",(0,t.jsx)(n.p,{children:"Optimized loading states prevent layout shift and improve perceived performance. Skeleton rows match the table's column structure."}),"\n",(0,t.jsx)(n.h3,{id:"initial-load-skeleton",children:"Initial load skeleton"}),"\n",(0,t.jsxs)(n.p,{children:["When ",(0,t.jsx)(n.code,{children:"loading=true"})," and no data yet, displays a skeleton grid."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"<DataTable<User>\n  data={[]}\n  columns={[nameCol, emailCol]}\n  loading\n  skeletonRows={5} // default: 5\n/>\n"})}),"\n",(0,t.jsx)(n.h3,{id:"refetch-overlay",children:"Refetch overlay"}),"\n",(0,t.jsxs)(n.p,{children:["When ",(0,t.jsx)(n.code,{children:"loading=true"})," AND data already present, shows a translucent overlay with skeleton grid on top of existing rows.\nThis avoids content jump during refresh."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"<DataTable<User>\n  data={users}\n  columns={[nameCol, emailCol]}\n  loading\n  loadingOverlay // true to show overlay\n/>\n"})}),"\n",(0,t.jsx)(n.h3,{id:"partial-loading-fetchmore",children:"Partial loading (fetchMore)"}),"\n",(0,t.jsxs)(n.p,{children:["When ",(0,t.jsx)(n.code,{children:"loadingMore=true"}),", appends skeleton rows at the bottom of the table to indicate incremental data fetching."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"<DataTable<User>\n  data={users}\n  columns={[nameCol, emailCol]}\n  loadingMore // append skeleton rows\n  skeletonRows={5}\n/>\n"})}),"\n",(0,t.jsx)(n.h3,{id:"accessibility--styling",children:"Accessibility & styling"}),"\n",(0,t.jsx)(n.p,{children:"Skeleton cells render with:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:'aria-hidden="true"'})," (visual placeholder, not announced)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:'role="status"'})," + ",(0,t.jsx)(n.code,{children:'aria-live="polite"'})," (grid announces loading to screen readers)"]}),"\n",(0,t.jsx)(n.li,{children:"Shimmer animation (linear gradient) for visual feedback"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"CSS organization:"})}),"\n",(0,t.jsxs)(n.p,{children:["All DataTable styles are centralized in ",(0,t.jsx)(n.code,{children:"src/style/app-fixed.module.css"})," for theming consistency. Per\u2011component CSS modules (",(0,t.jsx)(n.code,{children:"DataTable.module.css"}),", ",(0,t.jsx)(n.code,{children:"DataTableSkeleton.module.css"}),", etc.) compose styles from ",(0,t.jsx)(n.code,{children:"app-fixed"})," to satisfy the import policy checker."]}),"\n",(0,t.jsx)(n.p,{children:"Example per-component module:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-css",children:"/* src/shared-components/DataTable/DataTableSkeleton.module.css */\n@import 'src/style/app-fixed.module.css';\n\n.skeleton {\n  composes: dataSkeleton from global;\n}\n\n.skeletonCell {\n  composes: dataSkeletonCell from global;\n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Centralized styles in ",(0,t.jsx)(n.code,{children:"app-fixed"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-css",children:"/* src/style/app-fixed.module.css */\n@keyframes shimmer {\n  0% {\n    background-position: 0% 50%;\n  }\n  100% {\n    background-position: 200% 50%;\n  }\n}\n\n.dataSkeletonCell {\n  height: 16px;\n  border-radius: 6px;\n  background: linear-gradient(90deg, #eee 0%, #f5f5f5 50%, #eee 100%);\n  background-size: 200% 100%;\n  animation: shimmer 1.2s ease-in-out infinite;\n}\n\n.dataLoadingOverlay {\n  position: absolute;\n  inset: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: rgba(255, 255, 255, 0.6);\n  backdrop-filter: blur(1px);\n  pointer-events: none;\n  z-index: 10;\n  border-radius: 6px;\n}\n"})}),"\n",(0,t.jsx)(n.h3,{id:"tableloader-component",children:"TableLoader component"}),"\n",(0,t.jsx)(n.p,{children:"For reusable skeleton grids (e.g., in dialogs or custom loading states):"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import { TableLoader } from 'src/shared-components/DataTable/TableLoader';\n\n// Grid variant (no overlay)\n<TableLoader columns={columns} rows={5} ariaLabel=\"Loading users\" />\n\n// Overlay variant (translucent with grid)\n<TableLoader columns={columns} rows={3} asOverlay />\n"})}),"\n",(0,t.jsx)(n.h2,{id:"sorting",children:"Sorting"}),"\n",(0,t.jsx)(n.p,{children:"Enable per\u2011column sorting and optional custom comparators."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"const columns: Array<ColumnDef<User>> = [\n  { id: 'name', header: 'Name', accessor: 'name', meta: { sortable: true } },\n  {\n    id: 'email',\n    header: 'Email',\n    accessor: (u) => u.email,\n    meta: { sortable: true },\n  },\n  {\n    id: 'len',\n    header: 'Name Len',\n    accessor: (u) => u.name,\n    meta: { sortable: true, sortFn: (a, b) => a.name.length - b.name.length },\n  },\n];\n\n<DataTable<User> data={users} columns={columns} rowKey=\"id\" />;\n"})}),"\n",(0,t.jsx)(n.p,{children:"Server\u2011side sorting (no local reorder)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'<DataTable<User>\n  data={users}\n  columns={columns}\n  serverSort\n  sortBy="name"\n  sortDirection="asc"\n  onSortChange={({ sortBy, sortDirection }) => {\n    // refetch with variables { orderBy: { [sortBy]: sortDirection } }\n  }}\n/>\n'})}),"\n",(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsx)(n.p,{children:"Default comparator is stable, case\u2011insensitive for strings, and places null/undefined last.\nUse meta.sortFn for domain\u2011specific ordering."})}),"\n",(0,t.jsx)(n.h2,{id:"filtering-and-global-search",children:"Filtering and Global Search"}),"\n",(0,t.jsx)(n.p,{children:"Per\u2011column filtering and global search against searchable columns."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"const columns: Array<ColumnDef<User>> = [\n  {\n    id: 'name',\n    header: 'Name',\n    accessor: 'name',\n    meta: { filterable: true, searchable: true },\n  },\n  {\n    id: 'email',\n    header: 'Email',\n    accessor: 'email',\n    meta: { filterable: true, searchable: true },\n  },\n  {\n    id: 'adult',\n    header: 'Adult?',\n    accessor: (u) => (u.age ?? 0) >= 18,\n    meta: {\n      filterable: true,\n      searchable: false,\n      filterFn: (row, val) =>\n        val === 'yes'\n          ? (row.age ?? 0) >= 18\n          : val === 'no'\n            ? (row.age ?? 0) < 18\n            : true,\n    },\n  },\n  {\n    id: 'complex',\n    header: 'Complex',\n    accessor: 'complexData',\n    meta: {\n      getSearchValue: (row) => row.complexData?.label ?? '',\n    },\n  },\n];\n\n<DataTable<User>\n  data={users}\n  columns={columns}\n  rowKey=\"id\"\n  showSearch\n  initialGlobalSearch=\"\"\n  columnFilters={{ name: 'ada' }}\n/>;\n"})}),"\n",(0,t.jsx)(n.p,{children:"Server modes: don\u2019t filter locally, just emit changes."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'<DataTable<User>\n  data={users}\n  columns={columns}\n  showSearch\n  globalSearch=""\n  onGlobalSearchChange={(q) => /* refetch with q */ null}\n  columnFilters={{}}\n  onColumnFiltersChange={(f) => /* refetch with f */ null}\n  serverSearch\n  serverFilter\n/>\n'})}),"\n",(0,t.jsx)(n.h2,{id:"selection-row-actions-and-bulk-actions",children:"Selection, Row Actions, and Bulk Actions"}),"\n",(0,t.jsx)(n.p,{children:"Enable selection, add row actions, and bulk actions for selected rows."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import type {\n  IRowAction,\n  IBulkAction,\n} from 'src/types/shared-components/DataTable/interface';\n\nconst rowActions: IRowAction<User>[] = [\n  { id: 'open', label: 'Open', onClick: (u) => console.log('open', u.id) },\n  {\n    id: 'disable',\n    label: 'Disable',\n    onClick: (u) => console.log('disable', u.id),\n    disabled: (u) => u.email.endsWith('@example.com'),\n  },\n];\n\nconst bulkActions: IBulkAction<User>[] = [\n  {\n    id: 'export',\n    label: 'Export CSV',\n    onClick: (rows) => console.log('export', rows.length),\n  },\n  {\n    id: 'remove',\n    label: 'Remove',\n    confirm: 'Remove selected users?',\n    onClick: (rows, keys) => console.log('remove', keys),\n  },\n];\n\n<DataTable<User>\n  data={users}\n  columns={[nameCol, emailCol]}\n  rowKey=\"id\"\n  selectable\n  rowActions={rowActions}\n  bulkActions={bulkActions}\n/>;\n"})}),"\n",(0,t.jsx)(n.h2,{id:"accessibility",children:"Accessibility"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:'Errors: role="alert" and aria\u2011live="assertive"'}),"\n",(0,t.jsx)(n.li,{children:'Loading/empty: aria\u2011busy and aria\u2011live="polite"'}),"\n",(0,t.jsx)(n.li,{children:"Sortable headers: set aria\u2011sort to ascending/descending/none"}),"\n",(0,t.jsx)(n.li,{children:'Search input: role="searchbox" via type="search" and explicit aria\u2011label'}),"\n",(0,t.jsx)(n.li,{children:"Selection: each checkbox has a readable label; header checkbox uses indeterminate state"}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsx)(n.p,{children:'Always provide a stable rowKey (e.g., "id") to keep focus and screen reader context consistent\nacross updates.'})}),"\n",(0,t.jsx)(n.h2,{id:"testing-and-coverage",children:"Testing and Coverage"}),"\n",(0,t.jsx)(n.p,{children:"Target: \u2265 95% coverage for files touched by table work."}),"\n",(0,t.jsx)(n.p,{children:"Recommended test areas"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Types sanity (compile smoke tests for ColumnDef/DataTableProps)"}),"\n",(0,t.jsx)(n.li,{children:"Rendering basics (headers, cell values; string and function accessors)"}),"\n",(0,t.jsx)(n.li,{children:"Precedence: error > loading > empty"}),"\n",(0,t.jsx)(n.li,{children:"Pagination: client slice, server load\u2011more, disabled edges"}),"\n",(0,t.jsx)(n.li,{children:"Loading: skeleton grid, overlay with existing rows, appended skeletons"}),"\n",(0,t.jsx)(n.li,{children:"Sorting: asc/desc toggle, custom sortFn, stability on ties, nulls last"}),"\n",(0,t.jsx)(n.li,{children:"Filtering/search: default contains, custom filterFn, server emit\u2011only"}),"\n",(0,t.jsx)(n.li,{children:"Selection/actions: single row, select\u2011all indeterminate, row actions, bulk actions"}),"\n",(0,t.jsx)(n.li,{children:"Accessibility roles/attributes (aria\u2011sort, aria\u2011live, checkbox labels)"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"performance--gotchas",children:"Performance & Gotchas"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Memoize columns with useMemo when defined inline to avoid re\u2011renders"}),"\n",(0,t.jsx)(n.li,{children:"Prefer lightweight cell renderers; avoid heavy closures in render()"}),"\n",(0,t.jsx)(n.li,{children:"Use stable rowKey to minimize DOM diffing and preserve selection/focus"}),"\n",(0,t.jsx)(n.li,{children:"For server pagination/sorting/filtering, debounce user input to reduce chatter"}),"\n",(0,t.jsx)(n.li,{children:"When using fetchMore, ensure notifyOnNetworkStatusChange is enabled if you rely on loadingMore"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"migration-guide-playbook",children:"Migration Guide (Playbook)"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Identify the screen\u2019s list query and row type T."}),"\n",(0,t.jsx)(n.li,{children:"Define columns: start with string accessors, add function accessors as needed."}),"\n",(0,t.jsx)(n.li,{children:"Replace bespoke markup with DataTable<T>, passing columns and data."}),"\n",(0,t.jsx)(n.li,{children:"Add empty/error handling via DataTable\u2019s built\u2011ins (remove local placeholders)."}),"\n",(0,t.jsxs)(n.li,{children:["Choose pagination mode:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Small list: client (pageSize)"}),"\n",(0,t.jsx)(n.li,{children:"Large/infinite: server (pageInfo, onLoadMore)"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Add sorting:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Client: meta.sortable (+ sortFn if needed)"}),"\n",(0,t.jsx)(n.li,{children:"Server: serverSort + onSortChange \u2192 refetch"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Add filtering/global search:","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Local: showSearch + columnFilters / initialGlobalSearch"}),"\n",(0,t.jsx)(n.li,{children:"Server: serverSearch/serverFilter + emit callbacks \u2192 refetch"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.li,{children:"Add selection/actions if required: selectable, rowActions, bulkActions."}),"\n",(0,t.jsx)(n.li,{children:"Tests: cover precedence chains, key flows; reach \u2265 95% coverage."}),"\n",(0,t.jsx)(n.li,{children:"Remove legacy table utilities and dead styles."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Before \u2192 After (concise)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'// Before: bespoke, no built-ins, ad-hoc loaders/errors\n<LegacyUsersTable users={data?.users ?? []} />\n\n// After: generic, consistent, extensible\n<DataTable<User>\n  data={rows}\n  columns={[nameCol, emailCol]}\n  rowKey="id"\n  paginationMode="server"\n  pageInfo={pageInfo}\n  onLoadMore={loadMore}\n/>\n'})}),"\n",(0,t.jsx)(n.h2,{id:"faq",children:"FAQ"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"Why string vs function accessors?"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"String accessors are simple and optimal when mapping fields. Function accessors allow\ntransformations (e.g., formatting) without duplicating data."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"When should I choose server pagination/sort?"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Any list that can grow large or must reflect backend ordering/search should use server mode."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"How do I add a custom filter?"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Provide meta.filterFn per column. Return true to keep a row; value comes from columnFilters[id]."}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsx)(n.p,{children:"How do I disable a bulk action conditionally?"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Supply a disabled predicate receiving selected rows and keys; return true to disable."}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"changelog-by-phase-tablefix",children:"Changelog by Phase (TableFix)"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Phase 1","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Define Column System and TypeScript Interfaces"}),"\n",(0,t.jsx)(n.li,{children:"Build DataTable Component Structure"}),"\n",(0,t.jsx)(n.li,{children:"Add Empty State and Error Handling"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Phase 2","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Add Pagination Support"}),"\n",(0,t.jsx)(n.li,{children:"Create useTableData Hook"}),"\n",(0,t.jsx)(n.li,{children:"Add Loading State Optimizations"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Phase 3","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Implement Sorting Functionality"}),"\n",(0,t.jsx)(n.li,{children:"Add Filtering and Search Capabilities"}),"\n",(0,t.jsx)(n.li,{children:"Implement Row and Bulk Actions"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Phase 4","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Stabilize selection, sorting, filtering, and loading overlay behavior"}),"\n",(0,t.jsx)(n.li,{children:"Expand test coverage for edge cases"}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["Phase 5","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"This phase completed a pilot migration of three admin screens (Users, BlockUser, Requests) to validate the DataTable architecture and establish patterns for future migrations."}),"\n",(0,t.jsx)(n.li,{children:"Validate useTableData integration patterns and DataTable column migration"}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Pilot Results:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u2705 Users.tsx: useTableData with infinite scroll and connection format"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 BlockUser.tsx: useTableData with dual-list view pattern (members + blocked users)"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 Requests.tsx: useSimpleTableData with simple array format"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 Eliminated all test flakiness (0 fixed waits, proper async patterns)"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 Established testing best practices (I18n providers, distinct testIDs, cleanup hooks)"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 Consistent ErrorPanel integration across all screens"}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"phase-5-pilot-detailed-patterns-and-results",children:"Phase 5 Pilot: Detailed Patterns and Results"}),"\n",(0,t.jsx)(n.p,{children:"The Phase 5 pilot successfully migrated three screens to validate DataTable patterns and establish migration best practices."}),"\n",(0,t.jsx)(n.h3,{id:"pilot-screens-overview",children:"Pilot Screens Overview"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Screen"}),(0,t.jsx)(n.th,{children:"Hook Used"}),(0,t.jsx)(n.th,{children:"Data Format"}),(0,t.jsx)(n.th,{children:"Key Features"}),(0,t.jsx)(n.th,{children:"Lines of Code"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Users.tsx"}),(0,t.jsx)(n.td,{children:"useTableData"}),(0,t.jsx)(n.td,{children:"Connection (edges/pageInfo)"}),(0,t.jsx)(n.td,{children:"Infinite scroll, role filtering"}),(0,t.jsx)(n.td,{children:"~400"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"BlockUser.tsx"}),(0,t.jsx)(n.td,{children:"useTableData"}),(0,t.jsx)(n.td,{children:"Connection (2 queries)"}),(0,t.jsx)(n.td,{children:"Dual-list toggle, block/unblock"}),(0,t.jsx)(n.td,{children:"~600"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Requests.tsx"}),(0,t.jsx)(n.td,{children:"useSimpleTableData"}),(0,t.jsx)(n.td,{children:"Simple array"}),(0,t.jsx)(n.td,{children:"Accept/reject actions"}),(0,t.jsx)(n.td,{children:"~300"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"userstsx-pattern-connection--infinite-scroll",children:"Users.tsx Pattern (Connection + Infinite Scroll)"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Data Structure:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-graphql",children:"{\n  allUsers(first: 12, after: null) {\n    edges {\n      node {\n        id\n        firstName\n        lastName\n        email\n        role\n      }\n      cursor\n    }\n    pageInfo {\n      hasNextPage\n      endCursor\n    }\n  }\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Implementation:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"const { rows, pageInfo, loading, error, fetchMore } = useTableData<\n  InterfaceQueryUserListForAdmin,\n  InterfaceQueryUserListForAdminArgs,\n  InterfaceUser\n>(\n  useQuery(USER_LIST_FOR_ADMIN, {\n    variables: { first: 12, after: null, adminFor: orgId },\n  }),\n  { path: (data) => data?.allUsers },\n);\n\n// Infinite scroll\nuseEffect(() => {\n  const handleScroll = () => {\n    if (\n      window.innerHeight + window.scrollY >= document.body.offsetHeight - 300 &&\n      pageInfo?.hasNextPage &&\n      !loading &&\n      fetchMore\n    ) {\n      fetchMore({ variables: { after: pageInfo.endCursor } });\n    }\n  };\n  window.addEventListener('scroll', handleScroll);\n  return () => window.removeEventListener('scroll', handleScroll);\n}, [pageInfo, loading, fetchMore]);\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Key Learnings:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"useTableData"})," automatically handles ",(0,t.jsx)(n.code,{children:"edges \u2192 rows"})," transformation"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"pageInfo"})," provides reliable pagination state"]}),"\n",(0,t.jsx)(n.li,{children:"Infinite scroll requires scroll listener cleanup"}),"\n",(0,t.jsx)(n.li,{children:"Test coverage: 95%+ achieved with proper async patterns"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"blockusertsx-pattern-dual-list-toggle",children:"BlockUser.tsx Pattern (Dual-List Toggle)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Challenge:"})," Single screen needs to display two different data sources (all members vs blocked users)."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Solution:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"const [showBlockedMembers, setShowBlockedMembers] = useState(false);\n\n// Query 1: All members\nconst membersQuery = useTableData<...>(\n  useQuery(GET_ORGANIZATION_MEMBERS_PG, {\n    variables: { id: orgId, first: 32, after: null },\n  }),\n  { path: (data) => data?.organization?.members }\n);\n\n// Query 2: Blocked users\nconst blockedQuery = useTableData<...>(\n  useQuery(GET_ORGANIZATION_BLOCKED_USERS_PG, {\n    variables: { id: orgId, first: 32, after: null },\n  }),\n  { path: (data) => data?.organization?.blockedUsers }\n);\n\n// Conditional data source\nconst { rows, loading, error, refetch } = showBlockedMembers\n  ? blockedQuery\n  : membersQuery;\n\n// Toggle dropdown\n<Dropdown\n  options={[\n    { label: 'All Members', value: 'allMembers' },\n    { label: 'Blocked Users', value: 'blockedUsers' }\n  ]}\n  onChange={(value) => setShowBlockedMembers(value === 'blockedUsers')}\n/>\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Key Learnings:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Multiple ",(0,t.jsx)(n.code,{children:"useTableData"})," calls can coexist in one component"]}),"\n",(0,t.jsx)(n.li,{children:"Conditional selection based on UI state works seamlessly"}),"\n",(0,t.jsx)(n.li,{children:"Each query maintains independent pagination state"}),"\n",(0,t.jsx)(n.li,{children:"Test both data sources in separate test cases"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"requeststsx-pattern-simple-array-format",children:"Requests.tsx Pattern (Simple Array Format)"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Challenge:"})," Query returns simple array, not connection format."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Solution: Use useSimpleTableData"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"// Query returns simple array\nconst query = useQuery<InterfaceQueryMembershipRequestsPgResult>(\n  MEMBERSHIP_REQUEST_PG,\n  { variables: { where: { organization: orgId } } },\n);\n\n// Extract with useSimpleTableData\nconst extractRequests = useCallback(\n  (data: InterfaceQueryMembershipRequestsPgResult) =>\n    data?.membershipRequestsPaginated || [],\n  [],\n);\n\nconst { rows, loading, error, refetch } = useSimpleTableData<\n  InterfaceMembershipRequest,\n  InterfaceQueryMembershipRequestsPgResult\n>(query, { path: extractRequests });\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Why Not useTableData?"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Query response is ",(0,t.jsx)(n.code,{children:"membershipRequestsPaginated: InterfaceMembershipRequest[]"})]}),"\n",(0,t.jsxs)(n.li,{children:["No ",(0,t.jsx)(n.code,{children:"edges"}),", no ",(0,t.jsx)(n.code,{children:"pageInfo"})," in response"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"useSimpleTableData"})," designed for this exact scenario"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Key Learnings:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Hook choice depends on GraphQL query structure, not component preferences"}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"useSimpleTableData"})," requires memoized path function (useCallback)"]}),"\n",(0,t.jsxs)(n.li,{children:["Both hooks provide consistent interface: ",(0,t.jsx)(n.code,{children:"rows"}),", ",(0,t.jsx)(n.code,{children:"loading"}),", ",(0,t.jsx)(n.code,{children:"error"}),", ",(0,t.jsx)(n.code,{children:"refetch"})]}),"\n",(0,t.jsx)(n.li,{children:"Migration effort identical regardless of hook choice"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"testing-patterns-established",children:"Testing Patterns Established"}),"\n",(0,t.jsx)(n.p,{children:"The pilot eliminated all test flakiness by establishing these patterns:"}),"\n",(0,t.jsx)(n.h4,{id:"1-zero-fixed-waits",children:"1. Zero Fixed Waits"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Before (flaky):"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"await new Promise((resolve) => setTimeout(resolve, 1000));\nexpect(screen.getByText('John Doe')).toBeInTheDocument();\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"After (reliable):"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"await waitFor(() => {\n  expect(screen.getByText('John Doe')).toBeInTheDocument();\n});\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Result:"})," 0 instances of fixed waits across all 3 pilot screens."]}),"\n",(0,t.jsx)(n.h4,{id:"2-universal-i18n-provider-coverage",children:"2. Universal I18n Provider Coverage"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Pattern:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"render(\n  <I18nextProvider i18n={i18nForTest}>\n    <MockedProvider mocks={mocks}>\n      <BrowserRouter>\n        <Users />\n      </BrowserRouter>\n    </MockedProvider>\n  </I18nextProvider>,\n);\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Result:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Users.spec.tsx: 67 instances"}),"\n",(0,t.jsx)(n.li,{children:"BlockUser.spec.tsx: 49 instances"}),"\n",(0,t.jsx)(n.li,{children:"Requests.spec.tsx: 93 instances"}),"\n",(0,t.jsx)(n.li,{children:"Zero translation key errors"}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"3-distinct-testids",children:"3. Distinct TestIDs"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Before (ambiguous):"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'<Button data-testid="actionBtn">Block</Button>\n'})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"After (unique):"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"<Button data-testid={`blockUserBtn-${user.id}`}>Block</Button>\n<Button data-testid={`unblockUserBtn-${user.id}`}>Unblock</Button>\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Result:"})," No test selector collisions, easier debugging."]}),"\n",(0,t.jsx)(n.h4,{id:"4-proper-cleanup-hooks",children:"4. Proper Cleanup Hooks"}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Pattern:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"afterEach(() => {\n  cleanup();\n  vi.restoreAllMocks();\n});\n\nafterAll(() => {\n  // Restore global state (e.g., window.location)\n  delete (window as { location?: Location }).location;\n  Object.defineProperty(window, 'location', {\n    value: originalLocation,\n    writable: true,\n    configurable: true,\n  });\n});\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Why restoreAllMocks over clearAllMocks:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"restoreAllMocks()"}),": Clears history AND restores original implementations"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"clearAllMocks()"}),": Only clears history, keeps mocks active"]}),"\n",(0,t.jsx)(n.li,{children:"Critical for preventing mock leakage in sharded CI"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Result:"})," Zero test pollution across parallel test runs."]}),"\n",(0,t.jsx)(n.h3,{id:"errorpanel-integration-pattern",children:"ErrorPanel Integration Pattern"}),"\n",(0,t.jsx)(n.p,{children:"All three screens use consistent error handling:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"if (error) {\n  return (\n    <ErrorPanel\n      message={t('errorLoadingUsers')}\n      error={error}\n      onRetry={refetch}\n      testId=\"errorUsers\"\n    />\n  );\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Benefits:"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Consistent UX across all tables"}),"\n",(0,t.jsx)(n.li,{children:"Built-in retry functionality"}),"\n",(0,t.jsx)(n.li,{children:"Testable error states with unique testIds"}),"\n",(0,t.jsx)(n.li,{children:"Automatic error message display"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"migration-metrics",children:"Migration Metrics"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Metric"}),(0,t.jsx)(n.th,{children:"Users"}),(0,t.jsx)(n.th,{children:"BlockUser"}),(0,t.jsx)(n.th,{children:"Requests"}),(0,t.jsx)(n.th,{children:"Average"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Test Coverage"}),(0,t.jsx)(n.td,{children:"95%+"}),(0,t.jsx)(n.td,{children:"95%+"}),(0,t.jsx)(n.td,{children:"95%+"}),(0,t.jsx)(n.td,{children:"95%+"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Fixed Waits"}),(0,t.jsx)(n.td,{children:"0"}),(0,t.jsx)(n.td,{children:"0"}),(0,t.jsx)(n.td,{children:"0"}),(0,t.jsx)(n.td,{children:"0"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Test Flakiness"}),(0,t.jsx)(n.td,{children:"0%"}),(0,t.jsx)(n.td,{children:"0%"}),(0,t.jsx)(n.td,{children:"0%"}),(0,t.jsx)(n.td,{children:"0%"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Lines Removed"}),(0,t.jsx)(n.td,{children:"~200"}),(0,t.jsx)(n.td,{children:"~300"}),(0,t.jsx)(n.td,{children:"~150"}),(0,t.jsx)(n.td,{children:"~217"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Lines Added"}),(0,t.jsx)(n.td,{children:"~150"}),(0,t.jsx)(n.td,{children:"~250"}),(0,t.jsx)(n.td,{children:"~100"}),(0,t.jsx)(n.td,{children:"~167"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Net Reduction"}),(0,t.jsx)(n.td,{children:"-50"}),(0,t.jsx)(n.td,{children:"-50"}),(0,t.jsx)(n.td,{children:"-50"}),(0,t.jsx)(n.td,{children:"-50"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"hook-selection-decision-tree",children:"Hook Selection Decision Tree"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-mermaid",children:"flowchart TD\n    A[Check GraphQL Query Response] --\x3e B{Has edges/pageInfo?}\n    B --\x3e|Yes| C[Use useTableData]\n    B --\x3e|No| D[Use useSimpleTableData]\n    C --\x3e E[Get rows, pageInfo, fetchMore]\n    D --\x3e F[Get rows, refetch]\n    E --\x3e G[DataTable with server pagination]\n    F --\x3e H[DataTable with client pagination or no pagination]\n"})}),"\n",(0,t.jsx)(n.h3,{id:"recommendations-for-future-migrations",children:"Recommendations for Future Migrations"}),"\n",(0,t.jsx)(n.p,{children:"Based on pilot results:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Hook Choice:"})," Always determined by GraphQL structure, never by preference"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Testing:"})," Apply the 4 patterns (zero waits, I18n, distinct IDs, cleanup) from day 1"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Error Handling:"})," Use ErrorPanel for all query errors"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Empty States:"})," Provide contextual messages for different scenarios"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Column Definitions:"})," Memoize with useMemo when dependent on props/state"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"TestIDs:"})," Use ",(0,t.jsx)(n.code,{children:"${action}${entity}${id}"})," pattern for uniqueness"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Coverage:"})," Target 95%+ for edited files, verify with ",(0,t.jsx)(n.code,{children:"npm test -- --coverage"})]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"organization-and-people-screens-migration-examples",children:"Organization and People Screens Migration Examples"}),"\n",(0,t.jsx)(n.p,{children:"This section provides practical migration examples for organization and people management screens."}),"\n",(0,t.jsx)(n.h3,{id:"addmember-modal-table-phase-6",children:"AddMember Modal Table (Phase 6)"}),"\n",(0,t.jsx)(n.p,{children:"The AddMember component displays users in a modal for adding members to an organization."}),"\n",(0,t.jsx)(n.p,{children:"Before (MUI Table):"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import Table from '@mui/material/Table';\nimport TableBody from '@mui/material/TableBody';\nimport TableCell from '@mui/material/TableCell';\nimport TableRow from '@mui/material/TableRow';\n\n<TableContainer component={Paper}>\n  <Table>\n    <TableHead>\n      <TableRow>\n        <TableCell>#</TableCell>\n        <TableCell>Profile</TableCell>\n        <TableCell>User</TableCell>\n        <TableCell>Add Member</TableCell>\n      </TableRow>\n    </TableHead>\n    <TableBody>\n      {userLoading ? (\n        <TableRow>\n          <TableCell colSpan={4}>Loading...</TableCell>\n        </TableRow>\n      ) : (\n        users.map((user, index) => (\n          <TableRow key={user.id}>\n            <TableCell>{index + 1}</TableCell>\n            <TableCell>\n              <Avatar name={user.name} />\n            </TableCell>\n            <TableCell>{user.name}</TableCell>\n            <TableCell>\n              <Button onClick={() => addMember(user.id)}>Add</Button>\n            </TableCell>\n          </TableRow>\n        ))\n      )}\n    </TableBody>\n  </Table>\n</TableContainer>;\n"})}),"\n",(0,t.jsx)(n.p,{children:"After (DataTable):"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import { DataTable } from 'shared-components/DataTable/DataTable';\nimport type { IColumnDef } from 'types/shared-components/DataTable/interface';\n\ntype UserRow = IUserDetails & { rowIndex: number };\n\nconst columns: IColumnDef<UserRow>[] = [\n  { id: 'index', header: '#', accessor: 'rowIndex' },\n  {\n    id: 'profile',\n    header: 'Profile',\n    accessor: 'avatarURL',\n    render: (value, row) => <Avatar name={row.name} />,\n  },\n  {\n    id: 'user',\n    header: 'User',\n    accessor: 'name',\n    render: (_, row) => (\n      <Link to={`/member/${row.id}`}>\n        {row.name}\n        <br />\n        {row.emailAddress}\n      </Link>\n    ),\n  },\n  {\n    id: 'action',\n    header: 'Add Member',\n    accessor: 'id',\n    render: (_, row) => <Button onClick={() => addMember(row.id)}>Add</Button>,\n  },\n];\n\n<DataTable<UserRow>\n  data={users.map((user, index) => ({ ...user, rowIndex: index + 1 }))}\n  columns={columns}\n  rowKey=\"id\"\n  loading={userLoading}\n  error={userError}\n  emptyMessage=\"No users found\"\n/>;\n"})}),"\n",(0,t.jsx)(n.h3,{id:"people-list-screen-phase-6",children:"People List Screen (Phase 6)"}),"\n",(0,t.jsx)(n.p,{children:"The People screen displays organization members with filtering by role."}),"\n",(0,t.jsx)(n.p,{children:"Before (PeopleCard list):"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import PeopleCard from 'components/UserPortal/PeopleCard/PeopleCard';\nimport LoadingState from 'shared-components/LoadingState/LoadingState';\n\n<div className={styles.people_card_header}>\n  <span>{t('sNo')}</span>\n  <span>{t('avatar')}</span>\n  <span>{t('name')}</span>\n  <span>{t('email')}</span>\n  <span>{t('role')}</span>\n</div>\n<LoadingState isLoading={loading}>\n  {members.map((member, index) => (\n    <PeopleCard\n      key={index}\n      name={member.node.name}\n      image={member.node.avatarURL}\n      email={member.node.emailAddress}\n      role={member.userType}\n      sno={(index + 1).toString()}\n    />\n  ))}\n</LoadingState>\n"})}),"\n",(0,t.jsx)(n.p,{children:"After (DataTable):"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import { DataTable } from 'shared-components/DataTable/DataTable';\nimport type { IColumnDef } from 'types/shared-components/DataTable/interface';\n\ninterface IPeopleTableRow {\n  id: string;\n  name: string;\n  email: string;\n  image: string;\n  role: string;\n  sno: number;\n}\n\nconst tableData: IPeopleTableRow[] = members.map((member, index) => ({\n  id: member.node.id,\n  name: member.node.name,\n  email: member.node.emailAddress ?? t('emailNotAvailable'),\n  image: member.node.avatarURL ?? '',\n  role: member.userType,\n  sno: index + 1 + currentPage * rowsPerPage,\n}));\n\nconst columns: IColumnDef<IPeopleTableRow>[] = [\n  { id: 'sno', header: t('sNo'), accessor: 'sno', meta: { width: '60px' } },\n  {\n    id: 'avatar',\n    header: t('avatar'),\n    accessor: 'image',\n    render: (value, row) =>\n      value ? <img src={value} alt={row.name} /> : <Avatar name={row.name} />,\n  },\n  { id: 'name', header: t('name'), accessor: 'name' },\n  { id: 'email', header: t('email'), accessor: 'email' },\n  { id: 'role', header: t('role'), accessor: 'role' },\n];\n\n<DataTable<IPeopleTableRow>\n  data={tableData}\n  columns={columns}\n  loading={loading}\n  emptyMessage={t('nothingToShow')}\n  rowKey=\"id\"\n  skeletonRows={rowsPerPage}\n/>;\n"})}),"\n",(0,t.jsx)(n.h3,{id:"key-migration-patterns",children:"Key Migration Patterns"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Custom cell rendering"}),": Use the ",(0,t.jsx)(n.code,{children:"render"})," function in column definitions for complex cells like avatars, links, or action buttons."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Row data transformation"}),": Transform raw API data into a flat row structure before passing to DataTable."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Loading states"}),": Replace custom loading components with DataTable's built-in ",(0,t.jsx)(n.code,{children:"loading"})," prop."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Empty states"}),": Use the ",(0,t.jsx)(n.code,{children:"emptyMessage"})," prop instead of conditional rendering."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Pagination"}),": Keep external pagination controls (like PaginationList) when needed for server-side pagination."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Preserved test IDs"}),": Add ",(0,t.jsx)(n.code,{children:"data-testid"})," attributes in render functions to maintain test compatibility."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"testing-datatable-components",children:"Testing DataTable Components"}),"\n",(0,t.jsx)(n.h3,{id:"core-testing-principles",children:"Core Testing Principles"}),"\n",(0,t.jsx)(n.p,{children:"When testing components that use DataTable, follow these patterns to ensure reliable, maintainable tests."}),"\n",(0,t.jsx)(n.h4,{id:"1-always-use-i18nextprovider",children:"1. Always Use I18nextProvider"}),"\n",(0,t.jsx)(n.p,{children:"DataTable components often use translated strings. Always wrap test renders with I18nextProvider to prevent translation errors."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"import { I18nextProvider } from 'react-i18next';\nimport i18nForTest from 'utils/i18nForTest';\n\nit('renders user table', async () => {\n  render(\n    <I18nextProvider i18n={i18nForTest}>\n      <MockedProvider mocks={mocks}>\n        <BrowserRouter>\n          <Users />\n        </BrowserRouter>\n      </MockedProvider>\n    </I18nextProvider>,\n  );\n\n  await waitFor(() => {\n    expect(screen.getByTestId('datatable')).toBeInTheDocument();\n  });\n});\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Why:"}),' Missing I18nextProvider causes tests to fail with translation key errors like "Missing translation for key: users.title"']}),"\n",(0,t.jsx)(n.h4,{id:"2-avoid-fixed-waits---use-waitfor-instead",children:"2. Avoid Fixed Waits - Use waitFor Instead"}),"\n",(0,t.jsxs)(n.p,{children:["\u274c ",(0,t.jsx)(n.strong,{children:"Bad - Fixed waits are flaky:"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"await wait(500); // Arbitrary timeout, may fail in CI\nexpect(screen.getByText('John Doe')).toBeInTheDocument();\n"})}),"\n",(0,t.jsxs)(n.p,{children:["\u2705 ",(0,t.jsx)(n.strong,{children:"Good - Use waitFor for assertions:"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"await waitFor(() => {\n  expect(screen.getByText('John Doe')).toBeInTheDocument();\n});\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Why:"})," Fixed waits create race conditions in sharded test environments. ",(0,t.jsx)(n.code,{children:"waitFor"})," polls until the condition is met or times out, making tests reliable across different machine speeds."]}),"\n",(0,t.jsx)(n.h4,{id:"3-testid-naming-conventions",children:"3. TestID Naming Conventions"}),"\n",(0,t.jsx)(n.p,{children:"Use descriptive, unique test IDs that clearly indicate the element's purpose."}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Pattern for action buttons:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"// \u2705 Good - Distinct IDs for different actions\n<Button data-testid={`blockUser${userId}`}>Block</Button>\n<Button data-testid={`unblockUser${userId}`}>Unblock</Button>\n\n// \u274c Bad - Same ID for different actions\n<Button data-testid={`blockUser${userId}`}>\n  {isBlocked ? 'Unblock' : 'Block'}\n</Button>\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Pattern for table elements:"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'// Table container\n<div data-testid="datatable">\n\n// Empty state\n<div data-testid="users-empty-state">\n\n// Loading state\n<div data-testid="TableLoader">\n\n// Error state\n<div data-testid="errorMembers">\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Why:"})," Unique test IDs prevent selector ambiguity and make tests easier to debug when they fail."]}),"\n",(0,t.jsx)(n.h4,{id:"4-testing-loading-states",children:"4. Testing Loading States"}),"\n",(0,t.jsx)(n.p,{children:"Test both initial loading and data-loaded states:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"it('shows loading state then data', async () => {\n  const delayedMocks = [\n    {\n      request: { query: USER_LIST },\n      result: { data: mockUsers },\n      delay: 100, // Simulate network delay\n    },\n  ];\n\n  render(\n    <I18nextProvider i18n={i18nForTest}>\n      <MockedProvider mocks={delayedMocks}>\n        <Users />\n      </MockedProvider>\n    </I18nextProvider>,\n  );\n\n  // Assert loading state is shown\n  expect(screen.getByTestId('TableLoader')).toBeInTheDocument();\n\n  // Wait for loading to finish\n  await waitFor(() => {\n    expect(screen.queryByTestId('TableLoader')).not.toBeInTheDocument();\n  });\n\n  // Assert data is displayed\n  await waitFor(() => {\n    expect(screen.getByText('John Doe')).toBeInTheDocument();\n  });\n});\n"})}),"\n",(0,t.jsx)(n.h4,{id:"5-testing-error-states",children:"5. Testing Error States"}),"\n",(0,t.jsx)(n.p,{children:"Test error handling with ErrorPanel:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"it('displays error panel when query fails', async () => {\n  const errorMocks = [\n    {\n      request: { query: USER_LIST },\n      error: new Error('Network error'),\n    },\n  ];\n\n  render(\n    <I18nextProvider i18n={i18nForTest}>\n      <MockedProvider mocks={errorMocks}>\n        <Users />\n      </MockedProvider>\n    </I18nextProvider>,\n  );\n\n  await waitFor(() => {\n    expect(screen.getByTestId('errorMsg')).toBeInTheDocument();\n    expect(screen.getByText(/Network error/i)).toBeInTheDocument();\n  });\n});\n"})}),"\n",(0,t.jsx)(n.h4,{id:"6-testing-empty-states",children:"6. Testing Empty States"}),"\n",(0,t.jsx)(n.p,{children:'Test both "no data" and "no search results" scenarios:'}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"it('shows empty state when no users exist', async () => {\n  const emptyMocks = [\n    {\n      request: { query: USER_LIST },\n      result: {\n        data: {\n          allUsers: {\n            edges: [],\n            pageInfo: { hasNextPage: false, endCursor: null },\n          },\n        },\n      },\n    },\n  ];\n\n  render(\n    <I18nextProvider i18n={i18nForTest}>\n      <MockedProvider mocks={emptyMocks}>\n        <Users />\n      </MockedProvider>\n    </I18nextProvider>,\n  );\n\n  await waitFor(() => {\n    expect(screen.getByTestId('users-empty-state')).toBeInTheDocument();\n    expect(screen.getByText(/No User Found/i)).toBeInTheDocument();\n  });\n});\n\nit('shows no results when search yields empty', async () => {\n  // Test search with no matches\n  const searchInput = await screen.findByTestId('searchByName');\n  await userEvent.type(searchInput, 'NonexistentName');\n  await userEvent.click(screen.getByTestId('searchButton'));\n\n  await waitFor(() => {\n    expect(screen.getByText(/no results found/i)).toBeInTheDocument();\n  });\n});\n"})}),"\n",(0,t.jsx)(n.h4,{id:"7-testing-async-user-interactions",children:"7. Testing Async User Interactions"}),"\n",(0,t.jsxs)(n.p,{children:["When testing user interactions that trigger async operations, wrap assertions in ",(0,t.jsx)(n.code,{children:"waitFor"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"it('blocks a user successfully', async () => {\n  render(\n    <I18nextProvider i18n={i18nForTest}>\n      <MockedProvider mocks={mocksWithMutation}>\n        <BlockUser />\n      </MockedProvider>\n    </I18nextProvider>,\n  );\n\n  // Wait for initial data load\n  await waitFor(() => {\n    expect(screen.getByText('John Doe')).toBeInTheDocument();\n  });\n\n  // Click block button\n  const blockButton = screen.getByTestId('blockUser1');\n  await userEvent.click(blockButton);\n\n  // Wait for mutation result\n  await waitFor(() => {\n    expect(NotificationToast.success).toHaveBeenCalledWith(\n      'blockedSuccessfully',\n    );\n  });\n});\n"})}),"\n",(0,t.jsx)(n.h4,{id:"8-mock-cleanup-best-practices",children:"8. Mock Cleanup Best Practices"}),"\n",(0,t.jsxs)(n.p,{children:["Use ",(0,t.jsx)(n.code,{children:"vi.restoreAllMocks()"})," in ",(0,t.jsx)(n.code,{children:"afterEach"})," to prevent test pollution:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"afterEach(() => {\n  cleanup(); // Clean up React components\n  vi.restoreAllMocks(); // Restore all mocked functions\n});\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsxs)(n.strong,{children:["Why ",(0,t.jsx)(n.code,{children:"vi.restoreAllMocks()"})," instead of ",(0,t.jsx)(n.code,{children:"vi.clearAllMocks()"}),":"]})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"restoreAllMocks()"})," both clears mock history AND restores original implementations"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"clearAllMocks()"})," only clears call history but keeps mocks active"]}),"\n",(0,t.jsxs)(n.li,{children:["Using ",(0,t.jsx)(n.code,{children:"restoreAllMocks()"})," prevents mock leakage between tests in sharded environments"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"testing-pagination",children:"Testing Pagination"}),"\n",(0,t.jsx)(n.h4,{id:"server-side-pagination-usetabledata",children:"Server-side Pagination (useTableData)"}),"\n",(0,t.jsx)(n.p,{children:"Test infinite scroll behavior:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"it('loads more users on scroll', async () => {\n  const paginationMocks = [\n    {\n      request: {\n        query: USER_LIST,\n        variables: { first: 12, after: null },\n      },\n      result: {\n        data: {\n          allUsers: {\n            edges: mockUsers(12),\n            pageInfo: { hasNextPage: true, endCursor: 'cursor1' },\n          },\n        },\n      },\n    },\n    {\n      request: {\n        query: USER_LIST,\n        variables: { first: 12, after: 'cursor1' },\n      },\n      result: {\n        data: {\n          allUsers: {\n            edges: mockUsers(12, 12), // Next page\n            pageInfo: { hasNextPage: false, endCursor: 'cursor2' },\n          },\n        },\n      },\n    },\n  ];\n\n  render(\n    <I18nextProvider i18n={i18nForTest}>\n      <MockedProvider mocks={paginationMocks}>\n        <Users />\n      </MockedProvider>\n    </I18nextProvider>,\n  );\n\n  // Wait for first page\n  await waitFor(() => {\n    expect(screen.getByText('User 1')).toBeInTheDocument();\n  });\n\n  // Trigger scroll\n  window.dispatchEvent(new Event('scroll'));\n  Object.defineProperty(window, 'scrollY', { value: 5000, writable: true });\n\n  // Wait for second page\n  await waitFor(() => {\n    expect(screen.getByText('User 13')).toBeInTheDocument();\n    expect(screen.getByText(/End of results/i)).toBeInTheDocument();\n  });\n});\n"})}),"\n",(0,t.jsx)(n.h4,{id:"client-side-pagination-1",children:"Client-side Pagination"}),"\n",(0,t.jsx)(n.p,{children:"Test page navigation:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:"it('navigates between pages', async () => {\n  render(\n    <I18nextProvider i18n={i18nForTest}>\n      <MockedProvider mocks={mocks}>\n        <UsersList />\n      </MockedProvider>\n    </I18nextProvider>,\n  );\n\n  // Verify first page\n  await waitFor(() => {\n    expect(screen.getByText('User 1')).toBeInTheDocument();\n    expect(screen.queryByText('User 11')).not.toBeInTheDocument();\n  });\n\n  // Click next page\n  await userEvent.click(screen.getByLabelText('Go to next page'));\n\n  // Verify second page\n  await waitFor(() => {\n    expect(screen.queryByText('User 1')).not.toBeInTheDocument();\n    expect(screen.getByText('User 11')).toBeInTheDocument();\n  });\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"common-testing-pitfalls",children:"Common Testing Pitfalls"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Missing I18nextProvider"}),": Always wrap renders with I18nextProvider"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Fixed waits"}),": Use ",(0,t.jsx)(n.code,{children:"waitFor"})," instead of ",(0,t.jsx)(n.code,{children:"await wait(ms)"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Inconsistent test IDs"}),": Use unique, descriptive test IDs"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Not testing loading states"}),": Test both loading and loaded states"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Not testing error states"}),": Test error handling with retry functionality"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Incomplete mock cleanup"}),": Use ",(0,t.jsx)(n.code,{children:"vi.restoreAllMocks()"})," in afterEach"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Race conditions"}),": Wrap async assertions in ",(0,t.jsx)(n.code,{children:"waitFor"})]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"testing-checklist",children:"Testing Checklist"}),"\n",(0,t.jsx)(n.p,{children:"When adding tests for DataTable components, ensure:"}),"\n",(0,t.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","I18nextProvider wraps all renders"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","No fixed waits (",(0,t.jsx)(n.code,{children:"await wait(ms)"}),")"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","All assertions use ",(0,t.jsx)(n.code,{children:"waitFor"})," when checking async updates"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Unique test IDs for all interactive elements"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Loading state is tested"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Error state is tested (with retry if applicable)"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Empty state is tested"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Search/filter functionality is tested"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Pagination is tested (if applicable)"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ",(0,t.jsx)(n.code,{children:"vi.restoreAllMocks()"})," is called in afterEach"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Test coverage \u226595% for edited files"]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}}}]);